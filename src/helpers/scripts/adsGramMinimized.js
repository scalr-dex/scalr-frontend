!function(){"use strict";try{if("undefined"!=typeof document){var o=document.createElement("style");o.appendChild(document.createTextNode('@charset "UTF-8";@import"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap";._banner_1jcal_1{position:fixed;top:0;left:0;width:100%;height:100%;overflow-y:scroll;display:flex;flex-direction:column;justify-content:space-between}._banner_1jcal_1 button{text-decoration:none;appearance:none;outline:none;box-shadow:none;background:none}._banner_1jcal_1 button:disabled{background:none}._banner_1jcal_1 *{max-width:none;font-size:0;margin:0;padding:0;box-sizing:content-box}._banner_1jcal_1::-webkit-scrollbar{display:none}._preview_1jcal_37{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}._wrapper_1jcal_46{margin:28px 60px 0 0;display:flex;flex-direction:column;height:100%}._background_px36w_1{position:fixed;top:0;left:0;width:100%;height:100%}._preview_px36w_9{position:absolute;border-radius:8px}._preview_px36w_9:after{border-radius:8px}._dark_px36w_18{background:var(--adsgram-bg-color, rgb(15 15 15 / 100%));background-blend-mode:darken}._dark_px36w_18:after{content:"";position:absolute;inset:0;background-position:center;background-repeat:no-repeat;background-size:cover;background-image:url(https://telegram.org/img/tgme/pattern.svg);filter:invert(99%) sepia(2%) saturate(1%) hue-rotate(161deg) brightness(116%) contrast(73%);mix-blend-mode:overlay}._light_px36w_36{background-image:radial-gradient(64.13% 64.66% at 0% 0%,#d6d896,#d6d89600),radial-gradient(57.75% 64.84% at 100% 100%,#dbddbe,#dbddbe00),radial-gradient(49.87% 52.71% at 0% 100%,#78a389,#78a38900);background-color:#99ba92;background-blend-mode:lighten}._light_px36w_36:after{content:"";position:absolute;inset:0;background-position:center;background-repeat:no-repeat;background-size:cover;background-image:url(https://telegram.org/img/tgme/pattern.svg);filter:invert(33%) sepia(5%) saturate(0%) hue-rotate(164deg) brightness(99%) contrast(100%);mix-blend-mode:soft-light}._label_aphru_1{padding:0 8px;border-radius:12px;width:fit-content;position:relative;z-index:1;cursor:pointer}._label_aphru_1:before{content:"";position:absolute;z-index:-1;inset:0;border-radius:12px}._dark_aphru_18:before{opacity:.55;filter:contrast(140%);background-color:var(--adsgram-secondary-bg-color)}._light_aphru_24:before{background-color:#4a8e3a8a}._text_aphru_28{font-family:SF Pro,Roboto,sans-serif;font-size:13px;font-weight:500;line-height:23px;text-align:center;vertical-align:top;color:var(--adsgram-button-text-color)}._footer_1310a_1{display:flex;flex-direction:column;margin:20px 0 16px 60px;justify-content:end;gap:8px;align-items:center;flex:1 1 auto}._timer_dby7g_1{padding:0 8px;width:fit-content;position:relative;z-index:1}._timer_dby7g_1:before{content:"";position:absolute;z-index:-1;inset:0;border-radius:12px}._dark_dby7g_16:before{opacity:.55;filter:contrast(140%);background-color:var(--adsgram-secondary-bg-color)}._light_dby7g_22:before{background-color:#4a8e3a8a}._time_dby7g_1{font-family:SF Pro,Roboto,sans-serif;font-size:13px;font-weight:500;line-height:23px;text-align:center;vertical-align:top;color:var(--adsgram-button-text-color)}._post_8vnoc_1{position:relative;display:flex;animation-name:_show_8vnoc_1;animation-play-state:running;animation-duration:.1s;animation-fill-mode:forwards;animation-timing-function:ease-out}@keyframes _show_8vnoc_1{0%{opacity:0}to{opacity:1}}._channel_8vnoc_21{align-self:end;cursor:pointer;margin:0 4px 0 10px;width:40px;height:40px}._icon_8vnoc_29{width:40px;height:40px;border-radius:100%;object-fit:cover;background-color:var(--adsgram-secondary-bg-color)}._tail_8vnoc_37{width:6px;height:10px;align-self:end;display:flex;color:var(--adsgram-secondary-bg-color);z-index:1}._tail_8vnoc_37 svg{width:6px;height:10px}._message_8vnoc_51{display:flex;flex-direction:column;border-radius:18px 18px 18px 0;background-color:var(--adsgram-secondary-bg-color);box-shadow:0 1px 2px #00000029;width:100%}._image_8vnoc_60{object-fit:cover;border-radius:16px 16px 4px 4px;width:calc(100% - 4px);margin:2px 2px 0;aspect-ratio:1}._text_8vnoc_68{font-family:SF Pro,Roboto,sans-serif;margin:8px;padding:0;display:flex;flex-direction:column;gap:18px;font-size:15px;line-height:18px;width:calc(100% - 16px)}._title_8vnoc_80{font-family:SF Pro,Roboto,sans-serif;font-size:15px;line-height:18px;font-weight:500;letter-spacing:0;color:var(--adsgram-text-color);margin:0;padding:0}._description_8vnoc_91{color:var(--adsgram-text-color);font-weight:400;font-size:15px;line-height:18px}._footer_8vnoc_98{display:flex;justify-content:space-between}._name_8vnoc_103{transition:color .2s cubic-bezier(.2,0,0,1);color:var(--adsgram-hint-color);text-decoration:none;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;border:none;padding:0;cursor:default;background:none;font-family:SF Pro,Roboto,sans-serif;font-weight:400;font-size:15px;line-height:18px;text-align:left;word-break:break-word}._clickable_8vnoc_124{cursor:pointer;color:var(--adsgram-link-color)}._adlabel_8vnoc_129{color:var(--adsgram-subtitle-text-color);transform:translate(-2px,4px);font-size:12px;line-height:16px;white-space:nowrap;vertical-align:bottom;align-self:end}._button_1ktlg_1{display:inline-block;position:relative;margin:4px 0 0 60px;width:calc(100% - 60px);height:40px;border:none;color:var(--adsgram-button-text-color);cursor:pointer;font-family:SF Pro,Roboto,sans-serif;font-size:14px;font-weight:400;line-height:40px;text-align:center;letter-spacing:.03em;z-index:1;background-color:transparent;border-radius:6px 6px 15px 15px;animation-name:_show_1ktlg_1;animation-play-state:running;animation-duration:.2s;animation-fill-mode:forwards;animation-timing-function:cubic-bezier(.2,0,0,1)}@keyframes _show_1ktlg_1{0%{transform:translateY(-20px) scale(.1);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}._button_1ktlg_1:before{content:"";position:absolute;z-index:-1;inset:0;border-radius:6px 6px 15px 15px}._light_1ktlg_46:before{background:#4a8e3a8c}._dark_1ktlg_50:before{background-color:var(--adsgram-secondary-bg-color);opacity:.55;filter:contrast(140%)}._button_1ktlg_1:active{animation-name:_click_1ktlg_1;animation-play-state:running;animation-duration:.1s;animation-fill-mode:forwards;animation-timing-function:cubic-bezier(.2,0,0,1)}@keyframes _click_1ktlg_1{0%{transform:scale(1)}to{transform:scale(95%)}}._tooltip_6220y_1{position:relative;text-align:center;border-radius:12px;background-color:var(--adsgram-secondary-bg-color);padding:10px 12px;top:-10px;opacity:0;scale:25%;cursor:default;box-shadow:0 1px 2px #00000029;animation-name:_show_6220y_1;animation-play-state:running;animation-duration:.2s;animation-fill-mode:forwards;animation-timing-function:cubic-bezier(.2,0,0,1);transform:translate(30px);align-self:center}@keyframes _show_6220y_1{0%{opacity:0;top:-10px;scale:25%}to{opacity:1;top:10px;scale:100%}}._tooltip_6220y_1:after{content:"";position:absolute;left:50%;top:0;transform:translate(-50%,-100%);border:6px solid;border-color:transparent transparent var(--adsgram-secondary-bg-color) transparent}._title_6220y_46{font-family:SF Pro,Roboto,sans-serif;font-size:13px;font-weight:500;line-height:16px;text-align:center;color:var(--adsgram-text-color);margin:0}._banner_1g55r_1{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c}._preview_1g55r_10{position:absolute;width:100%;height:100%}._preview_1g55r_10 .rmp-container{border-radius:8px}._button_qaa11_1{position:absolute;z-index:3;left:50%;transform:translate(-50%);height:48px;border-radius:8px;border:1px solid transparent;padding:12px 24px;background-color:var(--adsgram-button-color);color:var(--adsgram-button-text-color);cursor:pointer;font-size:16px;font-weight:600;line-height:24px;font-family:SF Pro,Roboto,sans-serif;animation-name:_show_qaa11_1;animation-duration:.3s;animation-fill-mode:forwards;animation-timing-function:cubic-bezier(.05,.7,.1,1)}@keyframes _show_qaa11_1{0%{opacity:0;bottom:10px}to{opacity:1;bottom:30px}}._visible_qaa11_35{visibility:visible;animation-play-state:running}._hidden_qaa11_40{visibility:hidden;animation-play-state:paused}._footer_171kv_1{position:absolute;bottom:0;width:100%;z-index:3;display:flex;justify-content:space-between}._timeline_gq9ld_1{height:18px;width:100%;margin:auto 8px;display:flex;flex-wrap:wrap;align-content:center}._bar_gq9ld_10{width:100%;height:2px;border-radius:4px;background-color:#ffffff59}._progress_gq9ld_17{width:0;height:100%;border-radius:4px;background-color:#fff}._wrapper_1aenh_1{display:flex;flex-direction:column;height:100%;font-family:SF Pro,Roboto,sans-serif;font-size:13px;font-weight:400;line-height:16px;letter-spacing:0;text-align:center;margin:10px 0;width:calc(100% - var(--adsgram-header-height) * 2);cursor:pointer}._adlabeltext_1aenh_16{color:#fff9;margin:0}._adlabel_1aenh_16{display:flex;align-items:center;color:#fff9;font-family:SF Pro,Roboto,sans-serif;font-size:13px;font-weight:400;line-height:16px;letter-spacing:0}._tgchannel_1aenh_32{color:#fff;margin:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}._close_3nc4s_1{height:100%;aspect-ratio:1 / 1;display:flex;place-content:center center;flex-wrap:wrap}._close_3nc4s_1._clickable_3nc4s_9{cursor:pointer}._image_3nc4s_13{animation-name:_show_3nc4s_1;animation-duration:.15s;animation-play-state:running;animation-timing-function:cubic-bezier(0,0,0,1)}@keyframes _show_3nc4s_1{0%{opacity:0}to{opacity:1}}._header_vtxy5_1{--adsgram-header-height: 52px;position:absolute;top:0;width:100%;height:var(--adsgram-header-height);z-index:3;background:linear-gradient(#00000059,#0000);display:flex;justify-content:space-between}._preview_vtxy5_14{border-radius:8px 8px 0 0}._volume_p5grr_1{height:100%;aspect-ratio:1 / 1;display:flex;place-content:center center;flex-wrap:wrap;cursor:pointer}._packshot_1og3q_1{background:#141414cc;position:absolute;top:0;height:100%;width:100%;display:flex;place-content:center center;flex-wrap:wrap;backdrop-filter:blur(25px);animation-name:_packshot_1og3q_1;animation-duration:.2s;animation-timing-function:cubic-bezier(0,0,0,1)}@supports ((-webkit-backdrop-filter: none) or (backdrop-filter: none)){._packshot_1og3q_1{background:#7474804d;-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px)}}._creatives_1og3q_24{width:280px;display:flex;flex-direction:column;place-content:center center;transform:translateY(-26px);animation-name:_creatives_1og3q_24;animation-duration:.4s;animation-timing-function:cubic-bezier(.05,.7,.1,1);position:relative}._image_1og3q_36{width:128px;height:128px;border-radius:20px;border:1px solid rgb(0 0 0 / 4%);box-shadow:0 8px 20px #00000029;margin:0 auto 20px}._title_1og3q_45{font-family:SF Pro,Roboto,sans-serif;font-size:28px;font-weight:700;line-height:32px;letter-spacing:0;text-align:center;color:#fff;margin:8px}._description_1og3q_56{font-family:SF Pro,Roboto,sans-serif;font-size:16px;font-weight:500;line-height:24px;letter-spacing:0;text-align:center;color:#fff9}._play_1og3q_66{visibility:visible;animation-play-state:running}._pause_1og3q_71{visibility:hidden;animation-play-state:paused}@keyframes _packshot_1og3q_1{0%{opacity:0}to{opacity:1}}@keyframes _creatives_1og3q_24{0%{opacity:0;top:40px}to{opacity:1;top:0}}.rmp-container{width:100%;height:100%}.rmp-ad-container-skip,.rmp-ad-click-ui-mobile{visibility:hidden}.rmp-container{position:relative;text-align:center;outline:none;background:#000;padding:0;border:none;display:block;font-size:14px;max-width:none;max-height:none;overflow:hidden;line-height:1;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}.rmp-container *{box-sizing:border-box}.rmp-video,.rmp-content{width:100%;height:100%;position:absolute;left:0;top:0;margin:0;padding:0;outline:none;display:block}.rmp-ad-container{position:absolute;top:0;left:0;margin:0;padding:0;width:100%;height:100%;outline:none;display:block;text-align:initial}.rmp-fullscreen-on{position:fixed!important;width:100%!important;height:100%!important;background:#000!important;overflow:hidden!important;z-index:9999!important;top:0;left:0}.rmp-vpaid-container{position:absolute;top:0;left:0;margin:0;padding:0;width:100%;height:100%;outline:none;display:block;text-align:initial}.rmp-ad-vast-video-player{width:100%;height:100%;position:absolute;left:0;top:0;margin:0;padding:0;outline:none;display:block;cursor:pointer}.rmp-ad-container-icons{position:absolute;display:block;cursor:pointer}.rmp-ad-container-skip{position:absolute;right:0;bottom:44px;width:160px;height:40px;line-height:38px;text-align:center;cursor:pointer;background-color:#333;border:1px solid #333}.rmp-ad-container-skip:hover{border-color:#000}.rmp-ad-container-skip-waiting{width:100%;position:absolute;padding:0 2px;color:#cfcfcf;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.rmp-ad-container-skip-message{width:65%;position:absolute;left:5%;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.rmp-ad-container-skip-icon{position:absolute;left:75%;width:20%;height:100%;background-repeat:no-repeat;background-position:center;opacity:.7}.rmp-ad-container-skip:hover .rmp-ad-container-skip-icon{opacity:1}.rmp-ad-container-play-button{width:136px;height:136px;border-radius:100%;background-color:#ffffff1f;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}.rmp-ad-non-linear-container{position:absolute;text-align:center;left:50%;bottom:0;transform:translate(-50%)}.rmp-ad-non-linear-anchor:link,.rmp-ad-non-linear-anchor:visited,.rmp-ad-non-linear-anchor:hover,.rmp-ad-non-linear-anchor:active{text-decoration:none}.rmp-ad-non-linear-creative{position:relative;cursor:pointer;text-align:center;width:100%;height:100%;bottom:0}.rmp-ad-non-linear-close{right:0;top:0;position:absolute;cursor:pointer;width:20px;height:20px;background-color:#000;background-size:cover;border:4px solid #000000}.rmp-ad-click-ui-mobile{border:2px solid #ffffff;background:#0006;color:#fff;display:block;position:absolute;right:8px;top:8px;font-size:18px;width:112px;height:34px;text-decoration:none;text-align:center;line-height:30px;box-shadow:0 0 2px #0009}.rmp-ad-click-ui-mobile:visited,.rmp-ad-click-ui-mobile:hover,.rmp-ad-click-ui-mobile:active{color:#fff;text-decoration:none}.rmp-linear-simid-creative{position:absolute;top:0;border-width:0;width:100%;height:100%}.overlayed{position:absolute;top:0;width:640px;height:480px}.content{width:640px;height:480px}.hidden{display:none}._wrapper_1cu5o_1{width:100%;height:100%;position:relative}')),document.head.appendChild(o)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).SAD={})}(this,(function(e){"use strict";var t=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,l=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&o(e,n,t[n]);if(i)for(var n of i(t))s.call(t,n)&&o(e,n,t[n]);return e},c=(e,t)=>n(e,r(t)),d=(e,t,n)=>(o(e,"symbol"!=typeof t?t+"":t,n),n),u=(e,t,n)=>new Promise(((r,i)=>{var a=e=>{try{o(n.next(e))}catch(Et){i(Et)}},s=e=>{try{o(n.throw(e))}catch(Et){i(Et)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);o((n=n.apply(e,t)).next())}));const h={ru:"Ð£Ð¿Ñ! Ð’ Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð½ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾Ð¹ Ñ€ÐµÐºÐ»Ð°Ð¼Ñ‹. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ñ‘ Ñ€Ð°Ð· Ñ‡ÑƒÑ‚ÑŒ Ð¿Ð¾Ð·Ð¶Ðµ ðŸ™",en:"Oops! No ads available at the moment. Try again later ðŸ™"},p="RewardedVideo",_="FullscreenMedia",m={themeParams:{accentTextColor:"#168acd",bgColor:"#ffffff",buttonColor:"#40a7e3",buttonTextColor:"#ffffff",destructiveTextColor:"#d14e4e",headerBgColor:"#ffffff",hintColor:"#999999",linkColor:"#168acd",secondaryBgColor:"#f1f1f1",sectionBgColor:"#ffffff",sectionHeaderTextColor:"#168acd",sectionSeparatorColor:"#e7e7e7",subtitleTextColor:"#999999",textColor:"#000000"},initData:{authDate:new Date(1724378007e3),hash:"e1d28656e2cc7529099f01c0b145b7f5c0006d2d7bb0640ffa5d17c4e3f485fc",user:{allowsWriteToPm:!0,firstName:"Aliaksei",id:111111,languageCode:"en",lastName:"mock",username:"mock"}},initDataRaw:"query_id=AAEMo_0aAAAAAAyj_Ro3BMVq&user=%7B%22id%22%3A111111%2C%22first_name%22%3A%22Aliaksei%22%2C%22last_name%22%3A%22%22%2C%22username%22%3A%22mock%22%2C%22language_code%22%3A%22en%22%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1724378007&hash=e1d28656e2cc7529099f01c0b145b7f5c0006d2d7bb0640ffa5d17c4e3f485fc",version:"7.8",platform:"browser"};class f extends Error{constructor(e,t,n){super(t,{cause:n}),this.type=e,Object.setPrototypeOf(this,f.prototype)}}function g(e,t,n){return new f(e,t,n)}const v="ERR_METHOD_UNSUPPORTED",y="ERR_METHOD_PARAMETER_UNSUPPORTED",b="ERR_UNKNOWN_ENV",A="ERR_UNEXPECTED_TYPE",E="ERR_PARSE";class w{constructor(e,t,n){this.parser=e,this.isOptional=t,this.type=n}parse(e){if(!this.isOptional||void 0!==e)try{return this.parser(e)}catch(t){throw g(E,"Unable to parse value"+(this.type?` as ${this.type}`:""),t)}}optional(){return this.isOptional=!0,this}}function k(e,t){return()=>new w(e,!1,t)}function T(){return g(A,"Value has unexpected type")}const P=k((e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number(e);if(!Number.isNaN(t))return t}throw T()}),"number"),C=k((e=>e instanceof Date?e:new Date(1e3*P().parse(e))),"Date");function I(e,t){const n={};for(const i in e){const a=e[i];if(!a)continue;let s,o;if("function"==typeof a||"parse"in a)s=i,o="function"==typeof a?a:a.parse.bind(a);else{const{type:e}=a;s=a.from||i,o="function"==typeof e?e:e.parse.bind(e)}try{const e=o(t(s));void 0!==e&&(n[i]=e)}catch(r){throw g(E,`Unable to parse field "${i}"`,r)}}return n}function S(e,t){return new w((t=>{if("string"!=typeof t&&!(t instanceof URLSearchParams))throw T();const n="string"==typeof t?new URLSearchParams(t):t;return I(e,(e=>{const t=n.get(e);return null===t?void 0:t}))}),!1,t)}const V=k((e=>{if("string"==typeof e||"number"==typeof e)return e.toString();throw T()}),"string");function R(e){let t=e;if("string"==typeof t&&(t=JSON.parse(t)),"object"!=typeof t||null===t||Array.isArray(t))throw T();return t}function N(e,t){return new w((t=>{const n=R(t);return I(e,(e=>n[e]))}),!1,t)}const U=N({id:P(),type:V(),title:V(),photoUrl:{type:V().optional(),from:"photo_url"},username:V().optional()},"Chat").optional(),L=k((e=>{if("boolean"==typeof e)return e;const t=String(e);if("1"===t||"true"===t)return!0;if("0"===t||"false"===t)return!1;throw T()}),"boolean"),O=N({addedToAttachmentMenu:{type:L().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:L().optional(),from:"allows_write_to_pm"},firstName:{type:V(),from:"first_name"},id:P(),isBot:{type:L().optional(),from:"is_bot"},isPremium:{type:L().optional(),from:"is_premium"},languageCode:{type:V().optional(),from:"language_code"},lastName:{type:V().optional(),from:"last_name"},photoUrl:{type:V().optional(),from:"photo_url"},username:V().optional()},"User").optional();function x(){return S({authDate:{type:C(),from:"auth_date"},canSendAfter:{type:P().optional(),from:"can_send_after"},chat:U,chatInstance:{type:V().optional(),from:"chat_instance"},chatType:{type:V().optional(),from:"chat_type"},hash:V(),queryId:{type:V().optional(),from:"query_id"},receiver:O,startParam:{type:V().optional(),from:"start_param"},user:O},"InitData")}function D(e){const t=e.replace(/\s/g,"").toLowerCase();if(function(e){return/^#[\da-f]{6}$/i.test(e)}(t))return t;if(function(e){return/^#[\da-f]{3}$/i.test(e)}(t)){let e="#";for(let n=0;n<3;n+=1)e+=t[1+n].repeat(2);return e}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce(((e,t)=>{const n=parseInt(t,10).toString(16);return e+(1===n.length?"0":"")+n}),"#")}const F=k((e=>D(V().parse(e))),"rgb");const M=k((e=>{const t=F().optional();return Object.entries(R(e)).reduce(((e,[n,r])=>{var i;return e[(i=n,i.replace(/_[a-z]/g,(e=>e[1].toUpperCase())))]=t.parse(r),e}),{})}),"ThemeParams");function B(e){return M().parse(e)}function W(){return function(e){if(!e)throw new Error("No telegram initParams in storage");const{tgWebAppData:t,tgWebAppVersion:n,tgWebAppPlatform:r,tgWebAppThemeParams:i,tgWebAppBotInline:a,tgWebAppShowSettings:s,tgWebAppStartParam:o}=e;return{botInline:Boolean(Number(a)),initData:(l=t,x().parse(l)),initDataRaw:t,showSettings:Boolean(Number(s)),startParam:o,themeParams:B(i),version:n,platform:r};var l}(function(e){const t=sessionStorage.getItem(function(e){return`__telegram__${e}`}(e));try{return t?JSON.parse(t):void 0}catch(n){}}("initParams"))}function q(e){return S({botInline:{type:L().optional(),from:"tgWebAppBotInline"},initData:{type:x().optional(),from:"tgWebAppData"},initDataRaw:{type:V().optional(),from:"tgWebAppData"},platform:{type:V(),from:"tgWebAppPlatform"},showSettings:{type:L().optional(),from:"tgWebAppShowSettings"},startParam:{type:V().optional(),from:"tgWebAppStartParam"},themeParams:{type:M(),from:"tgWebAppThemeParams"},version:{type:V(),from:"tgWebAppVersion"}}).parse(e)}function $(e){return q(e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function H(){return $(window.location.href)}function j(){const e=performance.getEntriesByType("navigation")[0];if(!e)throw new Error("Unable to get first navigation entry.");return $(e.name)}function Y(){return q(JSON.parse(sessionStorage.getItem("tma.js/launch-params")||sessionStorage.getItem("telegram-apps/launch-params")||sessionStorage.getItem("adsgram/launch-params")||""))}function G(e){var t;try{const n=function(){for(const t of[H,j,W,Y])try{return t()}catch(e){}throw new Error("Unable to retrieve launch parameters from any known source.")}();return void 0===(null==(t=n.initData)?void 0:t.user)?(null==e||e(),m):n}catch(n){return null==e||e(),m}}function z(){return G().initData.user}function K(){return z().languageCode||window.navigator.language}function X(e){const t=K();return t in e?e[t]:e.en}const Z={[p]:"104",[_]:"511"},J=p,Q="duplicateShowError",ee="renderError",te={["noBannerToShowError"]:{description:X(h),state:"load",error:!1,done:!1},[Q]:{description:"Attempt to call show when an ad is being shown",state:"playing",error:!0,done:!1},[ee]:{description:"Error during render ad",state:"render",error:!0,done:!1},playError:{description:"Error during playing ad",state:"playing",error:!0,done:!1},skip:{description:"The banner was skipped",state:"playing",error:!1,done:!1},reward:{description:"The banner was viewed to the end",state:"destroy",error:!1,done:!0},noBannerDataError:{description:"No banner data to show",state:"load",error:!1,done:!1}},ne="https://api.adsgram.ai/",re="AdsgramError";function ie(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function ae(e,t){return function(e,t){const n=e.split("."),r=t.split("."),i=Math.max(n.length,r.length);for(let a=0;a<i;a+=1){const e=parseInt(n[a]||"0",10),t=parseInt(r[a]||"0",10);if(e!==t)return e>t?1:-1}return 0}(e,t)<=0}function se(e,t,n){if("string"==typeof n){if("web_app_open_link"===e&&"try_instant_view"===t)return ae("6.4",n);if("web_app_set_header_color"===e&&"color"===t)return ae("6.9",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return ae("6.1",t);case"web_app_open_popup":return ae("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return ae("6.4",t);case"web_app_switch_inline_query":return ae("6.7",t);case"web_app_request_write_access":case"web_app_request_phone":return ae("6.9",t);case"web_app_setup_settings_button":return ae("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return ae("7.2",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}let oe="https://web.telegram.org";function le(){return oe}function ce(e,t,n){let r,i={};void 0===t&&void 0===n?i={}:void 0!==t&&void 0!==n?(i=n,r=t):void 0!==t&&("targetOrigin"in t?i=t:r=t);const{targetOrigin:a=le()}=i;if(function(){try{return window.self!==window.top}catch(e){return!0}}())window.parent.postMessage(JSON.stringify({eventType:e,eventData:r}),a);else if("external"in(s=window)&&ie(s.external)&&"notify"in s.external&&"function"==typeof s.external.notify)window.external.notify(JSON.stringify({eventType:e,eventData:r}));else{var s;if(!function(e){return"TelegramWebviewProxy"in e&&ie(e.TelegramWebviewProxy)&&"postEvent"in e.TelegramWebviewProxy&&"function"==typeof e.TelegramWebviewProxy.postEvent}(window))throw g(b,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside of Telegram application environment.");window.TelegramWebviewProxy.postEvent(e,JSON.stringify(r))}}function de(e){return(t,n)=>{if(!se(t,e))throw g(v,`Method "${t}" is unsupported in Mini Apps version ${e}`);if(ie(n)){let r;if("web_app_open_link"===t&&"try_instant_view"in n?r="try_instant_view":"web_app_set_header_color"===t&&"color"in n&&(r="color"),r&&!se(t,r,e))throw g(y,`Parameter "${r}" of "${t}" method is unsupported in Mini Apps version ${e}`)}return ce(t,n)}}function ue(){return G().version}function he(e){try{de(ue())("web_app_open_popup",function(e){const t=e.message.trim(),n=(e.title||"").trim(),r=e.buttons||[];let i;if(n.length>64)throw new Error(`Title has incorrect size: ${n.length}`);if(!t.length||t.length>256)throw new Error(`Message has incorrect size: ${t.length}`);if(r.length>3)throw new Error(`Buttons have incorrect size: ${r.length}`);return i=r.length?r.map((e=>{const{id:t=""}=e;if(t.length>64)throw new Error(`Button ID has incorrect size: ${t}`);if(!e.type||"default"===e.type||"destructive"===e.type){const n=e.text.trim();if(!n.length||n.length>64){const t=e.type||"default";throw new Error(`Button text with type "${t}" has incorrect size: ${e.text.length}`)}return c(l({},e),{text:n,id:t})}return c(l({},e),{id:t})})):[{type:"close",id:""}],{title:n,message:t,buttons:i}}(e))}catch(t){alert(e.message)}}class pe extends Error{constructor({message:e}){super(e),d(this,"message"),this.name=re,this.message=`${re}: ${e}`,this.logError(e)}logError(e){he({title:"AdsgramError",message:e.length<256?e:e.substring(0,255)}),console.error(this)}}class _e extends Error{constructor({message:e,code:t}){super(),d(this,"message"),d(this,"code"),this.message=e,this.code=t}}const me=["blockId","campaignId","environment"],fe=({app:e,type:t,event:n,data:r})=>{const i={app:e,type:t,event:n};return r&&(i.data=JSON.stringify(((e,t)=>{const n=[],r=[];for(const[a,s]of Object.entries(t)){const t=e.indexOf(a);-1===t?n.push([a,s]):r[t]=[a,s]}const i=n.concat(r.filter((e=>e)));return Object.fromEntries(i)})(me,r))),new URLSearchParams(i)};class ge{constructor(e,t){return d(this,"apiUrl"),d(this,"app"),d(this,"data"),this.app=e,this.apiUrl=t,this.data={},this}getData(){return this.data}add(e,t){return(e=>{if(null==e||""===e)return!0;if("object"==typeof e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1})(t)||(this.data[e]=t),this}addError(e){return this.data.error=function(e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack}:String(e)}(e),this}clean(){return this.data={},this}send(e,t="ERROR"){fetch(`${this.getSendUrl(e,t)}`,{method:"GET",cache:"no-cache"}).then((()=>!0)).catch((()=>!1))}getLogRequestData(e,t){return{app:this.app,type:t,event:e,data:l({},this.data)}}getSendUrl(e,t){return`${this.apiUrl}?${fe(this.getLogRequestData(e,t))}`}}const ve="frontend-error";function ye(){const e=new ge("SAD",`${ne}${ve}`),t=function(){try{return{tg_id:String(z().id),tg_platform:G().platform,platform:window.navigator.platform,userAgent:window.navigator.userAgent,origin:window.location.origin}}catch(e){return null}}();return t&&e.add("environment",t),e}function be(e,t){return u(this,null,(function*(){const n=ye();n.add("blockId",e).add("isForceCampaign",Boolean(t)).add("campaignId",Number(t));try{const r=function(e,t){var n,r,i;const a=ye();a.add("blockId",e).add("campaignId",t);try{const{initData:s,platform:o}=G((()=>{a.send("NoUserData","WARN")})),{user:l,chat:c}=s;return{blockId:e,forceCampaignId:t,tg_id:String(l.id),tg_platform:o,platform:window.navigator.platform,language:(null==l?void 0:l.languageCode)||window.navigator.language,is_premium:null==l?void 0:l.isPremium,chat_type:null==s?void 0:s.chatType,chat_instance:null==s?void 0:s.chatInstance,attach_chat_type:null==c?void 0:c.type,attach_chat_id:(null==c?void 0:c.id)?String(null==c?void 0:c.id):void 0,receiver_id:(null==(n=null==s?void 0:s.receiver)?void 0:n.id)?String(null==(r=null==s?void 0:s.receiver)?void 0:r.id):void 0,receiver_is_bot:null==(i=s.receiver)?void 0:i.isBot}}catch(s){throw a.addError(s).send("CannotGetRequestData"),new pe({message:"Cannot get request data."})}}(e,t),i=yield fetch(`${ne}adv?${(e=>{const t={};for(const[n,r]of Object.entries(e))"object"==typeof r&&null!==r?t[n]=JSON.stringify(r):null!=r&&""!==r&&(t[n]=String(r));return new URLSearchParams(t)})(r)}`,{method:"GET",cache:"no-cache",referrerPolicy:"strict-origin-when-cross-origin"});if(i.ok)return yield i.json();switch((yield i.json()).error){case"Wrong referer":throw n.send("WrongReferer","WARN"),new pe({message:`Platform App url for blockId = ${e} not equal to ${window.location.origin}\nCreate new platform with app url ${window.location.origin} and new blockId for this platform.`});case"Need to use active blockid":throw n.send("BlockNotActive","WARN"),new pe({message:`Block ${e} is not active.\nChange status to active on https://partner.adsgram.ai/units/${e}/\nIf block has moderation status see https://docs.adsgram.ai/publisher/get-block-id#moderation`});case"Not found this id":throw n.send("BlockNotFound","WARN"),new pe({message:`BlockId = ${e} is not found. Make sure that this is your blockId https://partner.adsgram.ai/units/${e}/`});case"Need to specify blockid":throw n.send("NotPassBlock","WARN"),new pe({message:"You don't pass blockId to Init function"})}}catch(r){throw r instanceof _e?n.addError(r).send("APIFetchBannerData"):r instanceof pe||n.addError(r).send("UnknownFetchBannerDataError"),r}}))}var Ae,Ee,we,ke,Te,Pe,Ce,Ie,Se={},Ve=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ne=Array.isArray;function Ue(e,t){for(var n in t)e[n]=t[n];return e}function Le(e){var t=e.parentNode;t&&t.removeChild(e)}function Oe(e,t,n){var r,i,a,s={};for(a in t)"key"==a?r=t[a]:"ref"==a?i=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?Ae.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return xe(e,s,r,i,null)}function xe(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++we:i,__i:-1,__u:0};return null==i&&null!=Ee.vnode&&Ee.vnode(a),a}function De(e){return e.children}function Fe(e,t){this.props=e,this.context=t}function Me(e,t){if(null==t)return e.__?Me(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Me(e):null}function Be(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Be(e)}}function We(e){(!e.__d&&(e.__d=!0)&&ke.push(e)&&!qe.__r++||Te!==Ee.debounceRendering)&&((Te=Ee.debounceRendering)||Pe)(qe)}function qe(){var e,t,n,r,i,a,s,o,l;for(ke.sort(Ce);e=ke.shift();)e.__d&&(t=ke.length,r=void 0,a=(i=(n=e).__v).__e,o=[],l=[],(s=n.__P)&&((r=Ue({},i)).__v=i.__v+1,Ee.vnode&&Ee.vnode(r),Ze(s,r,i,n.__n,void 0!==s.ownerSVGElement,32&i.__u?[a]:null,o,null==a?Me(i):a,!!(32&i.__u),l),r.__.__k[r.__i]=r,Je(o,r,l),r.__e!=a&&Be(r)),ke.length>t&&ke.sort(Ce));qe.__r=0}function $e(e,t,n,r,i,a,s,o,l,c,d){var u,h,p,_,m,f=r&&r.__k||Ve,g=t.length;for(n.__d=l,function(e,t,n){var r,i,a,s,o,l=t.length,c=n.length,d=c,u=0;for(e.__k=[],r=0;r<l;r++)null!=(i=e.__k[r]=null==(i=t[r])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?xe(null,i,null,null,i):Ne(i)?xe(De,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?xe(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,o=Ye(i,n,s=r+u,d),i.__i=o,a=null,-1!==o&&(d--,(a=n[o])&&(a.__u|=131072)),null==a||null===a.__v?(-1==o&&u--,"function"!=typeof i.type&&(i.__u|=65536)):o!==s&&(o===s+1?u++:o>s?d>l-s?u+=o-s:u--:u=o<s&&o==s-1?o-s:0,o!==r+u&&(i.__u|=65536))):(a=n[r])&&null==a.key&&a.__e&&(a.__e==e.__d&&(e.__d=Me(a)),et(a,a,!1),n[r]=null,d--);if(d)for(r=0;r<c;r++)null!=(a=n[r])&&0==(131072&a.__u)&&(a.__e==e.__d&&(e.__d=Me(a)),et(a,a))}(n,t,f),l=n.__d,u=0;u<g;u++)null!=(p=n.__k[u])&&"boolean"!=typeof p&&"function"!=typeof p&&(h=-1===p.__i?Se:f[p.__i]||Se,p.__i=u,Ze(e,p,h,i,a,s,o,l,c,d),_=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&Qe(h.ref,null,p),d.push(p.ref,p.__c||_,p)),null==m&&null!=_&&(m=_),65536&p.__u||h.__k===p.__k?l=He(p,l,e):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:_&&(l=_.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=l,n.__e=m}function He(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=He(r[i],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function je(e,t){return t=t||[],null==e||"boolean"==typeof e||(Ne(e)?e.some((function(e){je(e,t)})):t.push(e)),t}function Ye(e,t,n,r){var i=e.key,a=e.type,s=n-1,o=n+1,l=t[n];if(null===l||l&&i==l.key&&a===l.type)return n;if(r>(null!=l&&0==(131072&l.__u)?1:0))for(;s>=0||o<t.length;){if(s>=0){if((l=t[s])&&0==(131072&l.__u)&&i==l.key&&a===l.type)return s;s--}if(o<t.length){if((l=t[o])&&0==(131072&l.__u)&&i==l.key&&a===l.type)return o;o++}}return-1}function Ge(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||Re.test(t)?n:n+"px"}function ze(e,t,n,r,i){var a;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ge(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Ge(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,a?Xe:Ke,a)):e.removeEventListener(t,a?Xe:Ke,a);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(s){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function Ke(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Ee.event?Ee.event(e):e)}function Xe(e){return this.l[e.type+!0](Ee.event?Ee.event(e):e)}function Ze(e,t,n,r,i,a,s,o,l,c){var d,u,h,p,_,m,f,g,v,y,b,A,E,w,k,T=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[o=t.__e=n.__e]),(d=Ee.__b)&&d(t);e:if("function"==typeof T)try{if(g=t.props,v=(d=T.contextType)&&r[d.__c],y=d?v?v.props.value:d.__:r,n.__c?f=(u=t.__c=n.__c).__=u.__E:("prototype"in T&&T.prototype.render?t.__c=u=new T(g,y):(t.__c=u=new Fe(g,y),u.constructor=T,u.render=tt),v&&v.sub(u),u.props=g,u.state||(u.state={}),u.context=y,u.__n=r,h=u.__d=!0,u.__h=[],u._sb=[]),null==u.__s&&(u.__s=u.state),null!=T.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=Ue({},u.__s)),Ue(u.__s,T.getDerivedStateFromProps(g,u.__s))),p=u.props,_=u.state,u.__v=t,h)null==T.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==T.getDerivedStateFromProps&&g!==p&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(g,y),!u.__e&&(null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(g,u.__s,y)||t.__v===n.__v)){for(t.__v!==n.__v&&(u.props=g,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),b=0;b<u._sb.length;b++)u.__h.push(u._sb[b]);u._sb=[],u.__h.length&&s.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(g,u.__s,y),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(p,_,m)}))}if(u.context=y,u.props=g,u.__P=e,u.__e=!1,A=Ee.__r,E=0,"prototype"in T&&T.prototype.render){for(u.state=u.__s,u.__d=!1,A&&A(t),d=u.render(u.props,u.state,u.context),w=0;w<u._sb.length;w++)u.__h.push(u._sb[w]);u._sb=[]}else do{u.__d=!1,A&&A(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++E<25);u.state=u.__s,null!=u.getChildContext&&(r=Ue(Ue({},r),u.getChildContext())),h||null==u.getSnapshotBeforeUpdate||(m=u.getSnapshotBeforeUpdate(p,_)),$e(e,Ne(k=null!=d&&d.type===De&&null==d.key?d.props.children:d)?k:[k],t,n,r,i,a,s,o,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&s.push(u),f&&(u.__E=u.__=null)}catch(P){t.__v=null,l||null!=a?(t.__e=o,t.__u|=l?160:32,a[a.indexOf(o)]=null):(t.__e=n.__e,t.__k=n.__k),Ee.__e(P,t,n)}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,i,a,s,o,l){var c,d,u,h,p,_,m,f=n.props,g=t.props,v=t.type;if("svg"===v&&(i=!0),null!=a)for(c=0;c<a.length;c++)if((p=a[c])&&"setAttribute"in p==!!v&&(v?p.localName===v:3===p.nodeType)){e=p,a[c]=null;break}if(null==e){if(null===v)return document.createTextNode(g);e=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,g.is&&g),a=null,o=!1}if(null===v)f===g||o&&e.data===g||(e.data=g);else{if(a=a&&Ae.call(e.childNodes),f=n.props||Se,!o&&null!=a)for(f={},c=0;c<e.attributes.length;c++)f[(p=e.attributes[c]).name]=p.value;for(c in f)p=f[c],"children"==c||("dangerouslySetInnerHTML"==c?u=p:"key"===c||c in g||ze(e,c,null,p,i));for(c in g)p=g[c],"children"==c?h=p:"dangerouslySetInnerHTML"==c?d=p:"value"==c?_=p:"checked"==c?m=p:"key"===c||o&&"function"!=typeof p||f[c]===p||ze(e,c,p,f[c],i);if(d)o||u&&(d.__html===u.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),$e(e,Ne(h)?h:[h],t,n,r,i&&"foreignObject"!==v,a,s,a?a[0]:n.__k&&Me(n,0),o,l),null!=a)for(c=a.length;c--;)null!=a[c]&&Le(a[c]);o||(c="value",void 0!==_&&(_!==e[c]||"progress"===v&&!_||"option"===v&&_!==f[c])&&ze(e,c,_,f[c],!1),c="checked",void 0!==m&&m!==e[c]&&ze(e,c,m,f[c],!1))}return e}(n.__e,t,n,r,i,a,s,l,c);(d=Ee.diffed)&&d(t)}function Je(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)Qe(n[r],n[++r],n[++r]);Ee.__c&&Ee.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(n){Ee.__e(n,t.__v)}}))}function Qe(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(r){Ee.__e(r,n)}}function et(e,t,n){var r,i;if(Ee.unmount&&Ee.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Qe(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){Ee.__e(a,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&et(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||Le(e.__e),e.__=e.__e=e.__d=void 0}function tt(e,t,n){return this.constructor(e,n)}function nt(e,t,n){var r,i,a,s;Ee.__&&Ee.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,a=[],s=[],Ze(t,e=(!r&&n||t).__k=Oe(De,null,[e]),i||Se,Se,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?Ae.call(t.childNodes):null,a,!r&&n?n:i?i.__e:t.firstChild,r,s),Je(a,e,s)}function rt(e,t){var n={__c:t="__cC"+Ie++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,We(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}Ae=Ve.slice,Ee={__e:function(e,t,n,r){for(var i,a,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(o){e=o}throw e}},we=0,Fe.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Ue({},this.state),"function"==typeof e&&(e=e(Ue({},n),this.props)),e&&Ue(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),We(this))},Fe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),We(this))},Fe.prototype.render=De,ke=[],Pe="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ce=function(e,t){return e.__v.__b-t.__v.__b},qe.__r=0,Ie=0;const it=["RewardedVideo","FullscreenMedia"];const at={show:"show",load:"load",preload:"preload",destroy:"destroy",finalDestroy:"finalDestroy",error:"error",renderError:"renderError"},st={onReward:"onReward",onStart:"onStart",onSkip:"onSkip",onBannerNotFound:"onBannerNotFound",onError:"onError"},ot=l(l(l({},at),st),{replay:"replay"});function lt({data:e,EventEmitter:t}){const n=function(e){return it.includes(e.bannerType)}(e);if(n){const e=document.body.style.overflow;document.body.style.overflow="hidden";try{de(ue())("web_app_expand")}catch(r){}t.on(at.finalDestroy,(()=>{document.body.style.overflow=e}))}}const ct=15,dt=30,ut="_banner_1jcal_1",ht="_wrapper_1jcal_46";let pt=class{constructor(){d(this,"handlers"),this.handlers=[]}on(e,t){if("function"!=typeof t)throw new pe({message:"The handler argument must be of type Function. Received type "+typeof t});if(!e)throw new pe({message:"The event argument must be of type String. Received type "+typeof e});if(!ot[e])throw new pe({message:`The event argument must be one of ${Object.keys(ot).join(", ")}. Received ${e}`});return this.handlers.push({event:e,handler:t}),this}off(e,t){return this.handlers=this.handlers.filter((n=>n.event!==e||n.handler!==t)),this}emit(e){let t=!1;return this.handlers.forEach((n=>{n.event===e&&(t=!0,n.handler())})),t}removeAllListeners(e){return e?(this.handlers=this.handlers.filter((t=>t.event!==e)),this):(this.handlers=[],this)}hasHandlers(e){return this.handlers.some((({event:t})=>t===e))}};const _t=rt(new Proxy(new pt,{apply(){console.warn("EventEmitter not initialized")},get(){console.warn("EventEmitter not initialized")}}));var mt,ft,gt,vt,yt=0,bt=[],At=[],Et=Ee.__b,wt=Ee.__r,kt=Ee.diffed,Tt=Ee.__c,Pt=Ee.unmount;function Ct(e,t){Ee.__h&&Ee.__h(ft,e,yt||t),yt=0;var n=ft.__H||(ft.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:At}),n.__[e]}function It(e){return yt=1,function(e,t,n){var r=Ct(mt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Bt(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=ft,!ft.u)){var i=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return e.__c}));if(i.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var s=!1;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&r.__c.props===e)&&(!a||a.call(this,e,t,n))};ft.u=!0;var a=ft.shouldComponentUpdate,s=ft.componentWillUpdate;ft.componentWillUpdate=function(e,t,n){if(this.__e){var r=a;a=void 0,i(e,t,n),a=r}s&&s.call(this,e,t,n)},ft.shouldComponentUpdate=i}return r.__N||r.__}(Bt,e)}function St(e,t){var n=Ct(mt++,3);!Ee.__s&&Mt(n.__H,t)&&(n.__=e,n.i=t,ft.__H.__h.push(n))}function Vt(e){return yt=5,Rt((function(){return{current:e}}),[])}function Rt(e,t){var n=Ct(mt++,7);return Mt(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Nt(e,t){return yt=8,Rt((function(){return e}),t)}function Ut(e){var t=ft.context[e.__c],n=Ct(mt++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(ft)),t.props.value):e.__}function Lt(){for(var e;e=bt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Dt),e.__H.__h.forEach(Ft),e.__H.__h=[]}catch(t){e.__H.__h=[],Ee.__e(t,e.__v)}}Ee.__b=function(e){ft=null,Et&&Et(e)},Ee.__r=function(e){wt&&wt(e),mt=0;var t=(ft=e.__c).__H;t&&(gt===ft?(t.__h=[],ft.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=At,e.__N=e.i=void 0}))):(t.__h.forEach(Dt),t.__h.forEach(Ft),t.__h=[],mt=0)),gt=ft},Ee.diffed=function(e){kt&&kt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==bt.push(t)&&vt===Ee.requestAnimationFrame||((vt=Ee.requestAnimationFrame)||xt)(Lt)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==At&&(e.__=e.__V),e.i=void 0,e.__V=At}))),gt=ft=null},Ee.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Dt),e.__h=e.__h.filter((function(e){return!e.__||Ft(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Ee.__e(n,e.__v)}})),Tt&&Tt(e,t)},Ee.unmount=function(e){Pt&&Pt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Dt(e)}catch(n){t=n}})),n.__H=void 0,t&&Ee.__e(t,n.__v))};var Ot="function"==typeof requestAnimationFrame;function xt(e){var t,n=function(){clearTimeout(r),Ot&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Ot&&(t=requestAnimationFrame(n))}function Dt(e){var t=ft,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),ft=t}function Ft(e){var t=ft;e.__c=e.__(),ft=t}function Mt(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Bt(e,t){return"function"==typeof t?t(e):t}function Wt(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function qt(e){this.props=e}(qt.prototype=new Fe).isPureReactComponent=!0,qt.prototype.shouldComponentUpdate=function(e,t){return Wt(this.props,e)||Wt(this.state,t)};var $t=Ee.__b;Ee.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),$t&&$t(e)};var Ht=Ee.__e;Ee.__e=function(e,t,n,r){if(e.then)for(var i,a=t;a=a.__;)if((i=a.__c)&&i.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t);Ht(e,t,n,r)};var jt=Ee.unmount;function Yt(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=function(e,t){for(var n in t)e[n]=t[n];return e}({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return Yt(e,t,n)}))),e}function Gt(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return Gt(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function zt(){this.__u=0,this.t=null,this.__b=null}function Kt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Xt(){this.u=null,this.o=null}Ee.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),jt&&jt(e)},(zt.prototype=new Fe).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=Kt(r.__v),a=!1,s=function(){a||(a=!0,n.__R=null,i?i(o):o())};n.__R=s;var o=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=Gt(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(s,s)},zt.prototype.componentWillUnmount=function(){this.t=[]},zt.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Yt(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&Oe(De,null,e.fallback);return i&&(i.__u&=-33),[Oe(De,null,t.__a?null:e.children),i]};var Zt=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(Xt.prototype=new Fe).__a=function(e){var t=this,n=Kt(t.__v),r=t.o.get(e);return r[0]++,function(i){var a=function(){t.props.revealOrder?(r.push(i),Zt(t,e,r)):i()};n?n(a):a()}},Xt.prototype.render=function(e){this.u=null,this.o=new Map;var t=je(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Xt.prototype.componentDidUpdate=Xt.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Zt(e,n,t)}))};var Jt="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Qt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,en=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,tn=/[A-Z0-9]/g,nn="undefined"!=typeof document,rn=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};Fe.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(Fe.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var an=Ee.event;function sn(){}function on(){return this.cancelBubble}function ln(){return this.defaultPrevented}Ee.event=function(e){return an&&(e=an(e)),e.persist=sn,e.isPropagationStopped=on,e.isDefaultPrevented=ln,e.nativeEvent=e};var cn={enumerable:!1,configurable:!0,get:function(){return this.class}},dn=Ee.vnode;Ee.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,r={};for(var i in t){var a=t[i];if(!("value"===i&&"defaultValue"in t&&null==a||nn&&"children"===i&&"noscript"===n||"class"===i||"className"===i)){var s=i.toLowerCase();"defaultValue"===i&&"value"in t&&null==t.value?i="value":"download"===i&&!0===a?a="":"ondoubleclick"===s?i="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||rn(t.type)?"onfocus"===s?i="onfocusin":"onblur"===s?i="onfocusout":en.test(i)?i=s:-1===n.indexOf("-")&&Qt.test(i)?i=i.replace(tn,"-$&").toLowerCase():null===a&&(a=void 0):s=i="oninput","oninput"===s&&r[i=s]&&(i="oninputCapture"),r[i]=a}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=je(t.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=je(t.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",cn)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=Jt,dn&&dn(e)};var un=Ee.__r;Ee.__r=function(e){un&&un(e),e.__c};var hn=Ee.diffed;function pn(){return Ut(_t)}Ee.diffed=function(e){hn&&hn(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value)};const _n={NONSKIP_ALWAYS:!0},mn=rt(_n);function fn(e){const t=Ut(mn);return Rt((()=>Boolean(t[e])),[e,t])}const gn=rt(ye());function vn(){return Ut(gn)}function yn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bn,An={exports:{}};bn=An,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=r(e,n(i)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var i="";for(var a in n)e.call(n,a)&&n[a]&&(i=r(i,a));return i}function r(e,t){return t?e?e+" "+t:e+t:e}bn.exports?(t.default=t,bn.exports=t):window.classNames=t}();const En=yn(An.exports),wn=rt(!1);function kn(){return Ut(wn)}const Tn={background:"_background_px36w_1",preview:"_preview_px36w_9",dark:"_dark_px36w_18",light:"_light_px36w_36"};var Pn=0;function Cn(e,t,n,r,i,a){var s,o,l={};for(o in t)"ref"==o?s=t[o]:l[o]=t[o];var c={type:e,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Pn,__i:-1,__u:0,__source:i,__self:a};if("function"==typeof e&&(s=e.defaultProps))for(o in s)void 0===l[o]&&(l[o]=s[o]);return Ee.vnode&&Ee.vnode(c),c}function In(){const e=kn();return Cn(De,{children:Cn("div",{className:En(Tn.background,e?Tn.dark:Tn.light,!1)})})}const Sn={label:"_label_aphru_1",dark:"_dark_aphru_18",light:"_light_aphru_24",text:"_text_aphru_28"},Vn="https://t.me/+NumBvh9EOiM2MDAy",Rn="https://t.me/+3u3wa8LtNjVkY2Zi";function Nn(){return"ru"===K()?Rn:Vn}function Un(e){try{const{hostname:t}=new URL(e);return"t.me"===t}catch(t){return!1}}function Ln({url:e,logger:t}){try{!function(e){if(Un(e)){const{pathname:t,search:n}=new URL(e);de(ue())("web_app_open_tg_link",{path_full:t+n})}else de(ue())("web_app_open_link",{try_instant_view:se("web_app_open_link","try_instant_view"),url:e})}(e)}catch(n){t.add("url",e).send("OpenUrlError","WARN"),window.open(e,"_blank")}}function On({timer:e}){const t=vn(),n=kn(),r=Nt((n=>{n.isTrusted&&(n.stopPropagation(),e.stop(),Ln({url:Nn(),logger:t}))}),[t,e]);return Cn("div",{className:En(Sn.label,n?Sn.dark:Sn.light),onClick:r,children:Cn("span",{className:Sn.text,children:"@adsgram_ai â€“ ads in Telegram"})})}const xn={footer:"_footer_1310a_1"},Dn={timer:"_timer_dby7g_1",dark:"_dark_dby7g_16",light:"_light_dby7g_22",time:"_time_dby7g_1"},Fn=e=>{const t=e%60,n=e=>`00${e}`.slice(-2);return`${n((e-t)/60%60)}:${n(t)}`};function Mn({timer:e}){const t=kn(),n=fn("FORCED_SUB_FORMAT"),[r,i]=It(n?dt:ct),a=Nt(((e,t)=>{i(t)}),[]);return St((()=>{e.subscribeOnTimeUpdate(a)}),[a,e]),Cn("div",{className:En(Dn.timer,t?Dn.dark:Dn.light),children:Cn("span",{className:Dn.time,children:Fn(r)})})}function Bn({timer:e}){const t=fn("NOT_SHOW_ADSGRAM_LABEL");return Cn("div",{className:xn.footer,children:[Cn(Mn,{timer:e}),!t&&Cn(On,{timer:e})]})}const Wn=e=>{var t=e,{src:n,alt:r,className:o,isCriticalImage:c}=t,d=((e,t)=>{var n={};for(var r in e)a.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&i)for(var r of i(e))t.indexOf(r)<0&&s.call(e,r)&&(n[r]=e[r]);return n})(t,["src","alt","className","isCriticalImage"]);const u=vn();u.add("url",n);const h=c?"Critical":"",p=Nt((()=>{u.send(`${h}ImageLoadError`)}),[h,u]);return Cn("img",l({className:o,src:n,alt:r,onError:p},d))},qn={post:"_post_8vnoc_1",show:"_show_8vnoc_1",channel:"_channel_8vnoc_21",icon:"_icon_8vnoc_29",tail:"_tail_8vnoc_37",message:"_message_8vnoc_51",image:"_image_8vnoc_60",text:"_text_8vnoc_68",title:"_title_8vnoc_80",description:"_description_8vnoc_91",footer:"_footer_8vnoc_98",name:"_name_8vnoc_103",clickable:"_clickable_8vnoc_124",adlabel:"_adlabel_8vnoc_129"},$n="Ad Â· 18+";function Hn(){return void 0!==window.ontouchstart||"ontouchstart"in document.documentElement}function jn({image:e,title:t,description:n,advertiserName:r,icon:i,onClick:a,isClickable:s}){const o=kn(),l=Hn();return Cn("div",{className:En(qn.post,o?qn.dark:qn.light),children:[Cn("div",{className:qn.channel,children:Cn(Wn,{src:i,alt:"channel",className:qn.icon})}),Cn("div",{className:qn.tail,children:Cn("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 10",children:Cn("path",{d:"M0 9c4.5-.5 6-5.5 6-9v10H0V9Z"})})}),Cn("div",{className:qn.message,children:[Cn(Wn,{src:e,alt:"Post main",className:qn.image,isCriticalImage:!0}),Cn("div",{className:qn.text,children:[Cn("h2",{className:qn.title,children:t}),Cn("span",{className:qn.description,children:n}),Cn("div",{className:qn.footer,children:[Cn("button",{className:En(qn.name,s&&qn.clickable),onClick:l?void 0:a,onTouchStart:l?a:void 0,disabled:!s,children:r}),Cn("span",{className:qn.adlabel,children:$n})]})]})]})]})}const Yn={button:"_button_1ktlg_1",show:"_show_1ktlg_1",light:"_light_1ktlg_46",dark:"_dark_1ktlg_50",click:"_click_1ktlg_1"};function Gn({buttonName:e,onClick:t}){const n=kn(),r=Hn();return Cn("button",{className:En(Yn.button,n?Yn.dark:Yn.light),onClick:r?void 0:t,onTouchStart:r?t:void 0,children:e})}const zn={ru:"Ð–Ð¼Ð¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð·Ð°Ð±Ñ€Ð°Ñ‚ÑŒ Ð½Ð°Ð³Ñ€Ð°Ð´Ñƒ!",en:"Click to get the reward!"},Kn={tooltip:"_tooltip_6220y_1",show:"_show_6220y_1",title:"_title_6220y_46"};function Xn(){return Cn("div",{className:Kn.tooltip,children:Cn("h3",{className:Kn.title,children:X(zn)})})}function Zn(e,t){St((()=>{let n=!1;const r=()=>{"visible"===document.visibilityState&&n&&(n=!1,e()),"hidden"===document.visibilityState&&(n=!0,null==t||t())},i=()=>{n&&(n=!1,e())};return window.addEventListener("visibilitychange",r),window.addEventListener("focus",i),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",i)}}),[t,e])}const Jn=2;function Qn(e,t){return u(this,arguments,(function*(e,t,n=Jn){if("string"!=typeof e||""===e)return t.add("trackingUrl",JSON.stringify(e)).send("WrongTrackingUrl"),!1;for(let i=1+n;i>0;--i)try{if((yield fetch(e,{method:"GET",cache:"no-cache"})).ok)return!0}catch(r){t.addError(r).add("trackingUrl",e).send("APITrackingError")}return!1}))}function er(e){const t=window.getComputedStyle(e);if("0px"==t.height||"none"==t.display||"0"==t.opacity||"hidden"==t.visibility||"circle(0px at 50% 50%)"==t.clipPath||"scale(0)"==t.transform||e.hasAttribute("hidden")||"hidden"===document.visibilityState)return!1;const n=e.getBoundingClientRect(),r=n.left,i=n.top,a=document.elementFromPoint(r,i);if(null!=a&&!e.isSameNode(a)){const n=t.zIndex,r=window.getComputedStyle(a).zIndex;if(Number(n)<Number(r))return!1;if(""===n&&""===r&&e.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING)return!1}return(n.bottom-n.top)*(n.right-n.left)>=.5*((window.innerHeight||document.documentElement.clientHeight)*(window.innerWidth||document.documentElement.clientWidth))}function tr(e){const t=Vt(null),[n,r]=It(!1);return St((()=>{t.current=new IntersectionObserver((([e])=>{e.isIntersecting&&er(e.target)?r(!0):r(!1)}),{root:null,rootMargin:"0px",threshold:.5})}),[]),St((()=>(e.current&&t.current&&t.current.observe(e.current),()=>{t.current&&(r(!1),t.current.disconnect())})),[e]),n}const nr=rt(void 0);function rr(e){const t=Ut(nr);return Rt((()=>(null==t?void 0:t[e])||""),[e,t])}function ir(){const e=vn(),t=rr("reward"),n=pn();St((()=>{const r=()=>{Qn(t,e)};return n.on(st.onReward,r),()=>{n.off(st.onReward,r)}}),[n,t,e])}const ar=class e{constructor({callbacks:e,endTime:t}){d(this,"startTime"),d(this,"endTime"),d(this,"time"),d(this,"stopped"),d(this,"finished"),d(this,"stopTime"),d(this,"fromStopToResumeTime"),d(this,"onSpecificTimeCallback"),d(this,"onTimeUpdateCallback"),d(this,"onTickUpdateCallback"),d(this,"onEndCallback"),this.startTime=performance.now(),this.endTime=t,this.time=0,this.stopped=!1,this.finished=!1,this.stopTime=0,this.fromStopToResumeTime=0,this.onSpecificTimeCallback={};for(const n in e)isNaN(Number(n))||(this.onSpecificTimeCallback[n]=e[n]);this.onTickUpdateCallback=e.onTimeUpdate,this.onTickUpdateCallback=e.onTick,this.onEndCallback=e.endCallback,this.tick()}get isFinished(){return this.finished}get isStopped(){return this.stopped}get elapsedTime(){return this.endTime-this.time}stop(){return this.stopped||(this.stopTime=performance.now(),this.stopped=!0),this.time}resume(){if(this.stopped){const e=performance.now()-this.stopTime;this.fromStopToResumeTime+=e,this.stopped=!1,this.tick()}}restart(){this.time=0,this.fromStopToResumeTime=performance.now()-this.stopTime,this.stopped=!1,this.finished=!1,this.tick()}subscribeOnSpecificTimeUpdate(e,t){this.onSpecificTimeCallback[e]=t}subscribeOnTimeUpdate(e){this.onTimeUpdateCallback=e}subscribeOnTickUpdate(e){this.onTickUpdateCallback=e}subscribeOnEnd(e){this.onEndCallback=e}unsubscribeAll(){this.onEndCallback=void 0,this.onTimeUpdateCallback=void 0,this.onSpecificTimeCallback={},this.onTickUpdateCallback=void 0}destroy(){this.finished=!0,this.unsubscribeAll()}tick(){var t,n,r;if(this.stopped||this.finished)return;if(performance.now()-this.fromStopToResumeTime-this.startTime>1e3*(this.time+1)){++this.time,null==(t=this.onTimeUpdateCallback)||t.call(this,this.time,this.elapsedTime);const e=this.onSpecificTimeCallback[this.time];null==e||e(this.time,this.elapsedTime)}this.time<this.endTime?setTimeout(this.tick.bind(this),e.checkInterval):(null==(n=this.onEndCallback)||n.call(this,this.time,this.elapsedTime),this.finished=!0),null==(r=this.onTickUpdateCallback)||r.call(this,this.time,this.elapsedTime)}};d(ar,"checkInterval",100);let sr=ar;const or="_banner_1g55r_1",lr=rt("");function cr(){return Ut(lr)}const dr={button:"_button_qaa11_1",show:"_show_qaa11_1",visible:"_visible_qaa11_35",hidden:"_hidden_qaa11_40"},ur=15e3,hr=rt(null);function pr(){return Ut(hr)}function _r(e){return`${e}-action-button`}const mr=new class{constructor(){d(this,"subscribers",{}),d(this,"dispatchedEvents",new Set)}onFiredBeforePlayerEvent(e,t){var n,r;this.dispatchedEvents.has(e)?t():(null!=(r=(n=this.subscribers)[e])?r:n[e]=[]).push(t)}dispatchEvent(e){var t;this.dispatchedEvents.add(e),null==(t=this.subscribers[e])||t.map((e=>e())),this.subscribers[e]=[]}clear(){this.dispatchedEvents=new Set,this.subscribers={}}};function fr({text:e}){const t=cr(),n=pr(),r=pn(),i=vn(),[a,s]=It(!1),[o,l]=It(""),c=Vt(1/0),d=Nt((()=>{n&&(l(n.clickThroughUrl),n.on("showActionButton",(()=>{s(!0)})))}),[n]);St((()=>{n&&mr.onFiredBeforePlayerEvent("adstarted",d)}),[d,n]);const u=Nt((e=>{e.isTrusted&&(!function(e){if(Un(e)){const{pathname:t}=new URL(e);return/bot\/./i.test(t)}return!1}(o)?(null==n||n.pause(),c.current=Date.now()):n&&(n.muted=!0),Ln({url:o,logger:i}))}),[o,i,n]);return Zn(Nt((()=>{Date.now()-c.current>ur&&r.emit("onReward"),c.current=1/0}),[r])),Cn("button",{id:_r(t),className:`${dr.button} ${a?dr.visible:dr.hidden}`,onClick:u,children:e})}const gr={footer:"_footer_171kv_1"};const vr={timeline:"_timeline_gq9ld_1",bar:"_bar_gq9ld_10",progress:"_progress_gq9ld_17"};function yr({packshotDuration:e}){const t=Vt(null),n=pr(),r=Nt((()=>{t.current&&n&&function({player:e,progress:t,packshotDuration:n}){const r=e.adDuration+(n||0);let i,a,s=!1,o=!1;e.on("adcomplete",(()=>{o=!0})),e.on("addestroyed",(()=>{s=!0}));const l=c=>{if(o&&n){void 0===i&&(i=c);const o=c-i;if(o>=n&&(s=!0),a!==c){const n=(e.adDuration+o)/r*100;t.style.width=`${n}%`}a=c}if(!o){const n=e.adCurrentTime/r*100;Number(t.style.width.replace("%",""))<n&&(t.style.width=`${n}%`)}s||requestAnimationFrame(l)};requestAnimationFrame(l)}({player:n,progress:t.current,packshotDuration:e})}),[e,n]);return St((()=>{n&&n.on("adstarted",r)}),[r,n]),Cn("div",{className:vr.timeline,children:Cn("div",{className:vr.bar,children:Cn("div",{className:vr.progress,ref:t})})})}function br({packshotDuration:e}){return Cn("div",{className:gr.footer,children:Cn(yr,{packshotDuration:e})})}const Ar={wrapper:"_wrapper_1aenh_1",adlabeltext:"_adlabeltext_1aenh_16",adlabel:"_adlabel_1aenh_16",tgchannel:"_tgchannel_1aenh_32"};function Er(){const e=pr(),t=vn(),n=fn("NOT_SHOW_ADSGRAM_LABEL"),r=Nt((()=>{e&&e.pause(),Ln({url:Nn(),logger:t})}),[t,e]);return n?Cn("p",{className:Ar.adlabel,children:$n}):Cn("div",{className:Ar.wrapper,onClick:r,children:[Cn("p",{className:Ar.tgchannel,children:"@adsgram_ai â€“ ads in Telegram"}),Cn("p",{className:Ar.adlabeltext,children:$n})]})}const wr={close:"_close_3nc4s_1",clickable:"_clickable_3nc4s_9",image:"_image_3nc4s_13",show:"_show_3nc4s_1"};const kr={ru:"ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ñ€ÐµÐºÐ»Ð°Ð¼Ñƒ?",en:"Skip Advert?"},Tr={ru:"ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð² Ñ€ÐµÐºÐ»Ð°Ð¼Ñƒ, Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ð½Ð°Ð³Ñ€Ð°Ð´Ñƒ",en:"If you skip ad, you won't get a reward"},Pr={ru:"ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ",en:"Skip anyway"},Cr={ru:"ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€",en:"Continue watching"};function Ir(){return`${cr()}-video`}const Sr="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18.295%207.115a.997.997%200%201%200-1.41-1.41L12%2010.59%207.115%205.705a.997.997%200%200%200-1.41%201.41L10.59%2012l-4.885%204.885a.997.997%200%200%200%201.41%201.41L12%2013.41l4.885%204.885a.997.997%200%201%200%201.41-1.41L13.41%2012l4.885-4.885Z'%20fill='%23fff'/%3e%3c/svg%3e";function Vr(){const e=pr(),t=function(){const e=pr(),t=Ir(),[n,r]=It(null);return St((()=>{mr.onFiredBeforePlayerEvent("adstarted",(()=>{var n;if(null==e?void 0:e.isSkippableAd){const e=null==(n=document.getElementById(t))?void 0:n.querySelector("div.rmp-ad-container-skip");e&&r(e)}}))}),[e,t]),n}(),n=pn(),[r,i]=It(!1),a=function(){const e=pr(),[t,n]=It(!1);return St((()=>{e&&e.on("adcomplete",(()=>{n(!0)}))}),[e]),t}(),s=fn("NONSKIP_ALWAYS"),o=function({onSkip:e,onContinue:t}){return Nt((()=>{var n,r;if("function"==typeof(null==(r=null==(n=window.Telegram)?void 0:n.WebApp)?void 0:r.showPopup))try{window.Telegram.WebApp.showPopup({title:X(kr),message:X(Tr),buttons:[{id:"skip",type:"destructive",text:X(Pr)},{id:"continue",type:"default",text:X(Cr)}]},(n=>{"skip"===n&&e(),"continue"===n&&t()}))}catch(i){e()}else e()}),[t,e])}({onSkip:Nt((()=>{t&&t.click(),n.emit(st.onSkip)}),[n,t]),onContinue:Nt((()=>{null==e||e.play()}),[e])}),l=Nt((()=>{r&&(a?n.emit(st.onReward):(null==e||e.pause(),o()))}),[n,r,a,e,o]);return St((()=>{e&&!s&&e.on("adskippablestatechanged",(()=>i(e.adSkippableState)))}),[s,e]),Cn("div",{onClick:l,className:En(wr.close,{clickable:r}),children:r&&Cn("img",{className:wr.image,src:Sr,alt:"Close ad button"})})}const Rr={header:"_header_vtxy5_1",preview:"_preview_vtxy5_14"},Nr={volume:"_volume_p5grr_1"},Ur="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M13%205.345c0-1.576-1.92-2.349-3.011-1.213L6.654%207.6H5a3%203%200%200%200-3%203v2.8a3%203%200%200%200%203%203h1.23l3.798%203.703c1.109%201.08%202.972.295%202.972-1.253V5.345ZM5%2014.4h2.044L11%2018.257V5.966L7.505%209.6H5a1%201%200%200%200-1%201v2.8a1%201%200%200%200%201%201Z'%20fill='%23fff'/%3e%3cpath%20d='M16.707%208.793a1%201%200%201%200-1.414%201.414L17.086%2012l-1.793%201.793a1%201%200%200%200%201.414%201.414l1.793-1.793%201.793%201.793a1%201%200%200%200%201.414-1.414L19.914%2012l1.793-1.793a1%201%200%200%200-1.414-1.414L18.5%2010.586l-1.793-1.793Z'%20fill='%23fff'/%3e%3c/svg%3e",Lr="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.807%203.39a1%201%200%200%201%201.324-.497%2010%2010%200%200%201%20.253%2018.095%201%201%200%201%201-.877-1.797%208%208%200%200%200-.202-14.476%201%201%200%200%201-.498-1.324Z'%20fill='%23fff'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.989%204.132C11.08%202.996%2013%203.769%2013%205.345V18.85c0%201.548-1.863%202.334-2.972%201.253L6.231%2016.4H5a3%203%200%200%201-3-3v-2.8a3%203%200%200%201%203-3h1.654l3.335-3.468ZM7.044%2014.4H5a1%201%200%200%201-1-1v-2.8a1%201%200%200%201%201-1h2.505L11%205.966v12.29L7.044%2014.4Z'%20fill='%23fff'/%3e%3cpath%20d='M16.479%206.536a1%201%200%200%200-.827%201.821%204%204%200%200%201%20.102%207.238%201%201%200%200%200%20.876%201.798%206%206%200%200%200-.151-10.857Z'%20fill='%23fff'/%3e%3c/svg%3e",Or="volume-button";function xr(){const e=pr(),[t,n]=It(!1);St((()=>{e&&n(e.muted)}),[e]);return Cn("div",{onClick:Nt((()=>{e.muted=!t,n((e=>!e))}),[t,e]),className:Nr.volume,"data-testid":Or,children:Cn("img",t?{src:Ur,alt:"unmute"}:{src:Lr,alt:"mute"})})}function Dr(){return Cn("div",{className:En(Rr.header,!1),children:[Cn(xr,{}),Cn(Er,{}),Cn(Vr,{})]})}const Fr={packshot:"_packshot_1og3q_1",creatives:"_creatives_1og3q_24",image:"_image_1og3q_36",title:"_title_1og3q_45",description:"_description_1og3q_56",play:"_play_1og3q_66",pause:"_pause_1og3q_71"};function Mr({image:e,title:t,description:n,duration:r}){const i=pr(),a=pn(),[s,o]=It(!1);return St((()=>{let e;return i&&i.on("adcomplete",(()=>{o(!0),e=setTimeout((()=>a.emit(st.onReward)),r)})),()=>{e&&clearTimeout(e)}}),[a,r,i]),Cn("div",{className:`${Fr.packshot} ${s?Fr.play:Fr.pause}`,children:Cn("div",{className:`${Fr.creatives} ${s?Fr.play:Fr.pause}`,children:[Cn(Wn,{className:Fr.image,src:e,alt:"app icon"}),Cn("span",{className:Fr.title,children:t}),Cn("span",{className:Fr.description,children:n})]})})}const Br=["ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS"];function Wr(e,t={},n={}){const r=[],i=Hr(e);!t.ERRORCODE||n.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=Kr(Math.round(1e8*Math.random())),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING;for(const a in t)t[a]=zr(t[a]);for(const a in i){const e=i[a];"string"==typeof e&&r.push(qr(e,t))}return r}function qr(e,t){const n=(e=$r(e,t)).match(/[^[\]]+(?=])/g);if(!n)return e;let r=n.filter((e=>Br.indexOf(e)>-1));return 0===r.length?e:(r=r.reduce(((e,t)=>(e[t]=-1,e)),{}),$r(e,r))}function $r(e,t){let n=e;for(const r in t){const e=t[r];n=n.replace(new RegExp(`(?:\\[|%%)(${r})(?:\\]|%%)`,"g"),e)}return n}function Hr(e){return Array.isArray(e)?e.map((e=>e&&e.hasOwnProperty("url")?e.url:e)):e}function jr(e){return/^(https?:\/\/|\/\/)/.test(e)}function Yr(e,t){for(let n=0;n<t.length;n++)if(Gr(t[n],e))return!0;return!1}function Gr(e,t){if(e&&t){const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);return n.length===r.length&&(e.id===t.id&&e.url===t.url)}return!1}function zr(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16)}`))}function Kr(e,t=8){return e.toString().padStart(t,"0")}const Xr={track:function(e,t,n){Wr(e,t,n).forEach((e=>{if("undefined"!=typeof window&&null!==window){(new Image).src=e}}))},resolveURLTemplates:Wr,extractURLsFromTemplates:Hr,filterValidUrlTemplates:function(e){return Array.isArray(e)?e.filter((e=>jr(e.hasOwnProperty("url")?e.url:e))):jr(e)},containsTemplateObject:Yr,isTemplateObjectEqual:Gr,encodeURIComponentRFC3986:zr,replaceUrlMacros:qr,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce(((t,n)=>t.concat(Array.isArray(n)?e(n):n)),[])},joinArrayOfUniqueTemplateObjs:function(e=[],t=[]){const n=Array.isArray(e)?e:[],r=Array.isArray(t)?t:[];return n.concat(r).reduce(((e,t)=>(Yr(t,e)||e.push(t),e)),[])},isValidTimeValue:function(e){return Number.isFinite(e)&&e>=-2},addLeadingZeros:Kr};function Zr(e){return-1!==["true","TRUE","True","1"].indexOf(e)}const Jr={childByName:function(e,t){const n=e.childNodes;for(const r in n){const e=n[r];if(e.nodeName===t)return e}},childrenByName:function(e,t){const n=[],r=e.childNodes;for(const i in r){const e=r[i];e.nodeName===t&&n.push(e)}return n},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){const{protocol:t}=location;return`${t}${e}`}if(-1===e.indexOf("://")){return`${t.slice(0,t.lastIndexOf("/"))}/${e}`}return e},parseBoolean:Zr,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,n){const r=t.getAttribute(e);r&&n.setAttribute(e,r)},parseAttributes:function(e){const t=e.attributes,n={};for(let r=0;r<t.length;r++)n[t[r].nodeName]=t[r].nodeValue;return n},parseDuration:function(e){if(null==e)return-1;if(Xr.isNumeric(e))return parseInt(e);const t=e.split(":");if(3!==t.length)return-1;const n=t[2].split(".");let r=parseInt(n[0]);2===n.length&&(r+=parseFloat(`0.${n[1]}`));const i=parseInt(60*t[1]),a=parseInt(60*t[0]*60);return isNaN(a)||isNaN(i)||isNaN(r)||i>3600||r>60?-1:a+i+r},splitVAST:function(e){const t=[];let n=null;return e.forEach(((r,i)=>{if(r.sequence&&(r.sequence=parseInt(r.sequence,10)),r.sequence>1){const t=e[i-1];if(t&&t.sequence===r.sequence-1)return void(n&&n.push(r));delete r.sequence}n=[r],t.push(n)})),t},assignAttributes:function(e,t){if(e)for(const n in e){const r=e[n];if(r.nodeName&&r.nodeValue&&t.hasOwnProperty(r.nodeName)){let e=r.nodeValue;"boolean"==typeof t[r.nodeName]&&(e=Zr(e)),t[r.nodeName]=e}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),t.viewableImpression.length>0&&(e.viewableImpression=[...e.viewableImpression,...t.viewableImpression]),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd,e.creatives=e.creatives;const n=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,r=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((e=>{if(t.trackingEvents&&t.trackingEvents[e.type])for(const n in t.trackingEvents[e.type]){const r=t.trackingEvents[e.type][n];Array.isArray(e.trackingEvents[n])||(e.trackingEvents[n]=[]),e.trackingEvents[n]=e.trackingEvents[n].concat(r)}"linear"===e.type&&(n&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),r&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate))}))}};function Qr(e,t){let n;const r=function(e={}){const{id:t,adId:n,sequence:r,apiFramework:i}=function(e={}){return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}(e);return{id:t,adId:n,sequence:r,apiFramework:i,type:"linear",duration:0,skipDelay:null,mediaFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,trackingEvents:{}}}(t);r.duration=Jr.parseDuration(Jr.parseNodeText(Jr.childByName(e,"Duration")));const i=e.getAttribute("skipoffset");if(null==i)r.skipDelay=null;else if("%"===i.charAt(i.length-1)&&-1!==r.duration){const e=parseInt(i,10);r.skipDelay=r.duration*(e/100)}else r.skipDelay=Jr.parseDuration(i);const a=Jr.childByName(e,"VideoClicks");if(a){const e=Jr.childByName(a,"ClickThrough");r.videoClickThroughURLTemplate=e?{id:e.getAttribute("id")||null,url:Jr.parseNodeText(e)}:null,Jr.childrenByName(a,"ClickTracking").forEach((e=>{r.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:Jr.parseNodeText(e)})})),Jr.childrenByName(a,"CustomClick").forEach((e=>{r.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:Jr.parseNodeText(e)})}))}const s=Jr.childByName(e,"AdParameters");return s&&(r.adParameters={value:Jr.parseNodeText(s),xmlEncoded:s.getAttribute("xmlEncoded")||null}),Jr.childrenByName(e,"TrackingEvents").forEach((e=>{Jr.childrenByName(e,"Tracking").forEach((e=>{let t=e.getAttribute("event");const i=Jr.parseNodeText(e);if(t&&i){if("progress"===t){if(n=e.getAttribute("offset"),!n)return;t="%"===n.charAt(n.length-1)?`progress-${n}`:`progress-${Math.round(Jr.parseDuration(n))}`}Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i)}}))})),Jr.childrenByName(e,"MediaFiles").forEach((e=>{Jr.childrenByName(e,"MediaFile").forEach((e=>{r.mediaFiles.push(function(e){const t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=Jr.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);const n=e.getAttribute("scalable");n&&"string"==typeof n&&(t.scalable=Jr.parseBoolean(n));const r=e.getAttribute("maintainAspectRatio");r&&"string"==typeof r&&(t.maintainAspectRatio=Jr.parseBoolean(r));return t}(e))}))})),r}function ei(e){const t=[];return e.forEach((e=>{const n=ti(e);n&&t.push(n)})),t}function ti(e){if("#comment"===e.nodeName)return null;const t={name:null,value:null,attributes:{},children:[]},n=e.attributes,r=e.childNodes;if(t.name=e.nodeName,e.attributes)for(const a in n)if(n.hasOwnProperty(a)){const e=n[a];e.nodeName&&e.nodeValue&&(t.attributes[e.nodeName]=e.nodeValue)}for(const a in r)if(r.hasOwnProperty(a)){const e=ti(r[a]);e&&t.children.push(e)}if(0===t.children.length||1===t.children.length&&["#cdata-section","#text"].indexOf(t.children[0].name)>=0){const n=Jr.parseNodeText(e);""!==n&&(t.value=n),t.children=[]}return null===(i=t).value&&0===Object.keys(i.attributes).length&&0===i.children.length?null:t;var i}function ni(e){const t=[];return e.forEach((e=>{const n={id:e.getAttribute("id")||null,adId:ri(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},r=[];let i;Jr.childrenByName(e,"UniversalAdId").forEach((e=>{const t={idRegistry:e.getAttribute("idRegistry")||"unknown",value:Jr.parseNodeText(e)};r.push(t)}));const a=Jr.childByName(e,"CreativeExtensions");a&&(i=ei(Jr.childrenByName(a,"CreativeExtension")));for(const s in e.childNodes){const a=e.childNodes[s];let o;switch(a.nodeName){case"Linear":o=Qr(a,n);break;case"NonLinearAds":throw new Error("NonLinear ads are not supported");case"CompanionAds":throw new Error("CompanionAds ads are not supported")}o&&(r&&(o.universalAdIds=r),i&&(o.creativeExtensions=i),t.push(o))}})),t}function ri(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}const ii={Wrapper:{subElements:["VASTAdTagURI","Impression"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},UniversalAdId:{attributes:["idRegistry"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},StaticResource:{attributes:["creativeType"]}};function ai(e,t){if(!ii[e.nodeName]||!ii[e.nodeName].attributes)return;const n=ii[e.nodeName].attributes.filter((t=>!e.getAttribute(t)));n.length>0&&li({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:n},t)}function si(e,t,n){const r=ii[e.nodeName],i=!n&&"Wrapper"!==e.nodeName;if(!r||i)return;if(r.subElements){const n=r.subElements.filter((t=>!Jr.childByName(e,t)));n.length>0&&li({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:n},t)}if(!n||!r.oneOfinLineResources)return;r.oneOfinLineResources.some((t=>Jr.childByName(e,t)))||li({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},t)}function oi(e){return e.children&&0!==e.children.length}function li({name:e,parentName:t,attributes:n,subElements:r,oneOfResources:i},a){let s=`Element '${e}'`;s+=n?` missing required attribute(s) '${n.join(", ")}' `:r?` missing required sub element(s) '${r.join(", ")}' `:i?` must provide one of the following '${i.join(", ")}' `:" is empty",a("VAST-warning",{message:s,parentElement:t,specVersion:4.1})}const ci={verifyRequiredValues:function e(t,n,r){if(t&&t.nodeName)if("InLine"===t.nodeName&&(r=!0),ai(t,n),oi(t)){si(t,n,r);for(let i=0;i<t.children.length;i++)e(t.children[i],n,r)}else 0===Jr.parseNodeText(t).length&&li({name:t.nodeName,parentName:t.parentNode.nodeName},n)},hasSubElements:oi,emitMissingValueWarning:li,verifyRequiredAttributes:ai,verifyRequiredSubElements:si};function di(e,t,{allowMultipleAds:n,followAdditionalWrappers:r}={}){const i=e.childNodes;for(const a in i){const s=i[a];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==r)){if(Jr.copyNodeAttribute("id",e,s),Jr.copyNodeAttribute("sequence",e,s),Jr.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return{ad:pi(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:ui(s,t,{allowMultipleAds:n}),type:"INLINE"}}}}function ui(e,t,{allowMultipleAds:n}={}){return!1===n&&e.getAttribute("sequence")?null:hi(e,t)}function hi(e,t){t&&ci.verifyRequiredValues(e,t);const n=e.childNodes,r=function(e={}){return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(Jr.parseAttributes(e));for(const i in n){const e=n[i];switch(e.nodeName){case"Error":r.errorURLTemplates.push(Jr.parseNodeText(e));break;case"Impression":r.impressionURLTemplates.push({id:e.getAttribute("id")||null,url:Jr.parseNodeText(e)});break;case"Creatives":r.creatives=ni(Jr.childrenByName(e,"Creative"));break;case"Extensions":{const t=Jr.childrenByName(e,"Extension");r.extensions=ei(t);break}case"AdSystem":r.system={value:Jr.parseNodeText(e),version:e.getAttribute("version")||null};break;case"AdTitle":r.title=Jr.parseNodeText(e);break;case"AdServingId":r.adServingId=Jr.parseNodeText(e);break;case"Expires":r.expires=parseInt(Jr.parseNodeText(e),10);break;case"ViewableImpression":r.viewableImpression.push(_i(e));break;case"Description":r.description=Jr.parseNodeText(e);break;case"Advertiser":r.advertiser={id:e.getAttribute("id")||null,value:Jr.parseNodeText(e)}}}return r}function pi(e,t){const n=hi(e,t),r=e.getAttribute("followAdditionalWrappers"),i=e.getAttribute("allowMultipleAds"),a=e.getAttribute("fallbackOnNoAd");n.followAdditionalWrappers=!r||Jr.parseBoolean(r),n.allowMultipleAds=!!i&&Jr.parseBoolean(i),n.fallbackOnNoAd=a?Jr.parseBoolean(a):null;let s=Jr.childByName(e,"VASTAdTagURI");if(s?n.nextWrapperURL=Jr.parseNodeText(s):(s=Jr.childByName(e,"VASTAdTagURL"),s&&(n.nextWrapperURL=Jr.parseNodeText(Jr.childByName(s,"URL")))),n.creatives.forEach((e=>{if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){n.trackingEvents||(n.trackingEvents={}),n.trackingEvents[e.type]||(n.trackingEvents[e.type]={});for(const t in e.trackingEvents){const r=e.trackingEvents[t];Array.isArray(n.trackingEvents[e.type][t])||(n.trackingEvents[e.type][t]=[]),r.forEach((r=>{n.trackingEvents[e.type][t].push(r)}))}}e.videoClickTrackingURLTemplates&&(Array.isArray(n.videoClickTrackingURLTemplates)||(n.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((e=>{n.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(n.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(n.videoCustomClickURLTemplates)||(n.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((e=>{n.videoCustomClickURLTemplates.push(e)})))}})),n.nextWrapperURL)return n}function _i(e){const t=(e,t)=>{const n=Jr.parseNodeText(t);return n&&e.push(n),e};return{id:e.getAttribute("id")||null,viewable:Jr.childrenByName(e,"Viewable").reduce(t,[]),notViewable:Jr.childrenByName(e,"NotViewable").reduce(t,[]),viewUndetermined:Jr.childrenByName(e,"ViewUndetermined").reduce(t,[])}}class mi{constructor(){this._handlers=[]}on(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type "+typeof t);if(!e)throw new TypeError("The event argument must be of type String. Received type "+typeof e);return this._handlers.push({event:e,handler:t}),this}once(e,t){return this.on(e,function(e,t,n){const r={fired:!1,wrapFn:void 0};function i(...i){r.fired||(e.off(t,r.wrapFn),r.fired=!0,n.bind(e)(...i))}return r.wrapFn=i,i}(this,e,t))}off(e,t){return this._handlers=this._handlers.filter((n=>n.event!==e||n.handler!==t)),this}emit(e,...t){let n=!1;return this._handlers.forEach((r=>{"*"===r.event&&(n=!0,r.handler(e,...t)),r.event===e&&(n=!0,r.handler(...t))})),n}removeAllListeners(e){return e?(this._handlers=this._handlers.filter((t=>t.event!==e)),this):(this._handlers=[],this)}listenerCount(e){return this._handlers.filter((t=>t.event===e)).length}listeners(e){return this._handlers.reduce(((t,n)=>(n.event===e&&t.push(n.handler),t)),[])}eventNames(){return this._handlers.map((e=>e.event))}}const fi={get:function(e,t,n){n(new Error("Please bundle the library for node to use the node urlHandler"))}},gi=12e4;function vi(){try{const e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function yi(e,t,n){const r=n?408:e.status,i=n?`XHRURLHandler: Request timed out after ${e.timeout} ms (${r})`:`XHRURLHandler: ${e.statusText} (${r})`;t(new Error(i),null,{statusCode:r})}const bi={get:function(e,t,n){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{const r=vi();r.open("GET",e),r.timeout=t.timeout||gi,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onload=()=>function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):yi(e,t,!1)}(r,n),r.onerror=()=>yi(r,n,!1),r.onabort=()=>yi(r,n,!1),r.ontimeout=()=>yi(r,n,!0),r.send()}catch(r){n(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!!vi()}};const Ai={get:function(e,t,n){return n||("function"==typeof t&&(n=t),t={}),"undefined"==typeof window||null===window?fi.get(e,t,n):bi.supported()?bi.get(e,t,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}};let Ei=0,wi=0;const ki=(e,t)=>{if(!e||!t||e<=0||t<=0)return;wi=(wi*Ei+8*e/t)/++Ei},Ti={ERRORCODE:900,extensions:[]};class Pi extends mi{constructor(){super(),this.remainingAds=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=null,this.URLTemplateFilters=[],this.fetchingOptions={},this.parsingOptions={}}addURLTemplateFilter(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}removeURLTemplateFilter(){this.URLTemplateFilters.pop()}countURLTemplateFilters(){return this.URLTemplateFilters.length}clearURLTemplateFilters(){this.URLTemplateFilters=[]}trackVastError(e,t,...n){this.emit("VAST-error",Object.assign({},Ti,t,...n)),Xr.track(e,t)}getErrorURLTemplates(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}getEstimatedBitrate(){return wi}fetchVAST(e,t=0,n=null,r=null){return new Promise(((i,a)=>{this.URLTemplateFilters.forEach((t=>{e=t(e)}));const s=Date.now();this.emit("VAST-resolving",{url:e,previousUrl:n,wrapperDepth:t,maxWrapperDepth:this.maxWrapperDepth,timeout:this.fetchingOptions.timeout,wrapperAd:r}),this.urlHandler.get(e,this.fetchingOptions,((r,o,l={})=>{const c=Math.round(Date.now()-s),d=Object.assign({url:e,previousUrl:n,wrapperDepth:t,error:r,duration:c},l);this.emit("VAST-resolved",d),ki(l.byteLength,c),r?a(r):i(o)}))}))}initParsingStatus(e={}){this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||gi,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||Ai,this.vastVersion=null,ki(e.byteLength,e.requestDuration)}getRemainingAds(e){if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));const t=e?Xr.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.resolveAds(t,{wrapperDepth:0,url:this.rootURL}).then((e=>this.buildVASTResponse(e)))}getAndParseVAST(e,t={}){return this.initParsingStatus(t),this.URLTemplateFilters.forEach((t=>{e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((n=>(t.previousUrl=e,t.isRootVAST=!0,t.url=e,this.parse(n,t).then((e=>this.buildVASTResponse(e))))))}parseVAST(e,t={}){return this.initParsingStatus(t),t.isRootVAST=!0,this.parse(e,t).then((e=>this.buildVASTResponse(e)))}buildVASTResponse(e){const t=function({ads:e,errorURLTemplates:t,version:n}){return{ads:e||[],errorURLTemplates:t||[],version:n||null}}({ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion});return this.completeWrapperResolving(t),t}parseVastXml(e,{isRootVAST:t=!1,url:n=null,wrapperDepth:r=0,allowMultipleAds:i,followAdditionalWrappers:a}){if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:n,wrapperDepth:r}),new Error("Invalid VAST XMLDocument");const s=[],o=e.documentElement.childNodes,l=e.documentElement.getAttribute("version");t&&l&&(this.vastVersion=l);for(const c in o){const e=o[c];if("Error"===e.nodeName){const n=Jr.parseNodeText(e);t?this.rootErrorURLTemplates.push(n):this.errorURLTemplates.push(n)}else if("Ad"===e.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)i=!0;else if(!1===i&&s.length>1)break;const t=di(e,this.emit.bind(this),{allowMultipleAds:i,followAdditionalWrappers:a});t.ad?(s.push(t.ad),this.emit("VAST-ad-parsed",{type:t.type,url:n,wrapperDepth:r,adIndex:s.length-1,vastVersion:l})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return s}parse(e,{url:t=null,resolveAll:n=!0,wrapperSequence:r=null,previousUrl:i=null,wrapperDepth:a=0,isRootVAST:s=!1,followAdditionalWrappers:o,allowMultipleAds:l}={}){let c=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&s&&(l=!0);try{c=this.parseVastXml(e,{isRootVAST:s,url:t,wrapperDepth:a,allowMultipleAds:l,followAdditionalWrappers:o})}catch(d){return Promise.reject(d)}return 1===c.length&&null!=r&&(c[0].sequence=r),!1===n&&(this.remainingAds=Jr.splitVAST(c),c=this.remainingAds.shift()),this.resolveAds(c,{wrapperDepth:a,previousUrl:i,url:t})}resolveAds(e=[],{wrapperDepth:t,previousUrl:n,url:r}){const i=[];return n=r,e.forEach((e=>{const r=this.resolveWrappers(e,t,n);i.push(r)})),Promise.all(i).then((e=>{const i=Xr.flatten(e);if(!i&&this.remainingAds.length>0){const e=this.remainingAds.shift();return this.resolveAds(e,{wrapperDepth:t,previousUrl:n,url:r})}return i}))}resolveWrappers(e,t,n){return new Promise((r=>{var i;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,r(e);if(t>=this.maxWrapperDepth)return e.errorCode=302,delete e.nextWrapperURL,r(e);e.nextWrapperURL=Jr.resolveVastAdTagURI(e.nextWrapperURL,n),this.URLTemplateFilters.forEach((t=>{e.nextWrapperURL=t(e.nextWrapperURL)}));const a=null!=(i=this.parsingOptions.allowMultipleAds)?i:e.allowMultipleAds,s=e.sequence;this.fetchVAST(e.nextWrapperURL,t,n,e).then((i=>this.parse(i,{url:e.nextWrapperURL,previousUrl:n,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:a}).then((t=>{if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],r(e);t.forEach((t=>{t&&Jr.mergeWrapperAdData(t,e)})),r(t)})))).catch((t=>{e.errorCode=301,e.errorMessage=t.message,r(e)}))}))}completeWrapperResolving(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(let t=e.ads.length-1;t>=0;t--){const n=e.ads[t];(n.errorCode||0===n.creatives.length)&&(this.trackVastError(n.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:n.errorCode||303},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),e.ads.splice(t,1))}}}let Ci=null;const Ii={data:{},length:0,getItem(e){return this.data[e]},setItem(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem(e){delete this.data[e],this.length=Object.keys(this.data).length},clear(){this.data={},this.length=0}};class Si{constructor(){this.storage=this.initStorage()}initStorage(){if(Ci)return Ci;try{Ci="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){Ci=null}return Ci&&!this.isStorageDisabled(Ci)||(Ci=Ii,Ci.clear()),Ci}isStorageDisabled(e){const t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(n){return!0}return e.removeItem(t),!1}getItem(e){return this.storage.getItem(e)}setItem(e,t){return this.storage.setItem(e,t)}removeItem(e){return this.storage.removeItem(e)}clear(){return this.storage.clear()}}class Vi{constructor(e,t,n){this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=t||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new Pi,this.storage=n||new Si,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}getParser(){return this.vastParser}get lastSuccessfulAd(){return this.storage.getItem("vast-client-last-successful-ad")}set lastSuccessfulAd(e){this.storage.setItem("vast-client-last-successful-ad",e)}get totalCalls(){return this.storage.getItem("vast-client-total-calls")}set totalCalls(e){this.storage.setItem("vast-client-total-calls",e)}get totalCallsTimeout(){return this.storage.getItem("vast-client-total-calls-timeout")}set totalCallsTimeout(e){this.storage.setItem("vast-client-total-calls-timeout",e)}hasRemainingAds(){return this.vastParser.remainingAds.length>0}getNextAds(e){return this.vastParser.getRemainingAds(e)}get(e,t={}){const n=Date.now();return(t=Object.assign({},this.defaultOptions,t)).hasOwnProperty("resolveAll")||(t.resolveAll=!1),this.totalCallsTimeout<n?(this.totalCalls=1,this.totalCallsTimeout=n+36e5):this.totalCalls++,new Promise(((r,i)=>{if(this.cappingFreeLunch>=this.totalCalls)return i(new Error(`VAST call canceled â€“ FreeLunch capping not reached yet ${this.totalCalls}/${this.cappingFreeLunch}`));const a=n-this.lastSuccessfulAd;if(a<0)this.lastSuccessfulAd=0;else if(a<this.cappingMinimumTimeInterval)return i(new Error(`VAST call canceled â€“ (${this.cappingMinimumTimeInterval})ms minimum interval reached`));this.vastParser.getAndParseVAST(e,t).then((e=>r(e))).catch((e=>i(e)))}))}}class Ri{constructor(){}_getConnectionType(){if("string"==typeof navigator.connection.type&&""!==navigator.connection.type)switch(navigator.connection.type){case"ethernet":return"ethernet";case"wifi":case"wimax":return"wifi";case"bluetooth":case"cellular":return"cellular";case"none":return"none"}return"unknown"}_getBandwidthEstimate(){if("number"==typeof navigator.connection.downlink&&navigator.connection.downlink>0)return navigator.connection.downlink;if("string"==typeof navigator.connection.effectiveType&&""!==navigator.connection.effectiveType)switch(navigator.connection.effectiveType){case"slow-2g":return.025;case"2g":return.035;case"3g":return.35;case"4g":return 1.4}else if("string"==typeof navigator.connection.type&&""!==navigator.connection.type)switch(navigator.connection.type){case"ethernet":case"wifi":case"wimax":return 1.4;case"bluetooth":case"cellular":return.35;case"none":return-1}return.025}get bandwidthData(){const e={estimate:-1,connectionType:"none"};return void 0===navigator.onLine||navigator.onLine?void 0===navigator.connection?{estimate:1.1,connectionType:"unknown"}:{estimate:this._getBandwidthEstimate(),connectionType:this._getConnectionType()}:e}}class Ni{static _getStyleAttributeData(e,t){let n=0;if(e&&"function"==typeof window.getComputedStyle){const r=window.getComputedStyle(e,null);r&&(n=r.getPropertyValue(t),n=n.toString().toLowerCase())}return n=n.toString(),n.indexOf("px")>-1&&(n=n.replace("px","")),parseFloat(n)}static createSyntheticEvent(e,t){let n;if(t)try{n=new Event(e),t.dispatchEvent(n)}catch(r){console.warn(r)}}static setStyle(e,t){if(e&&"object"==typeof t){Object.keys(t).forEach((n=>{e.style[n]=t[n]}))}}static getWidth(e){return e?Ni.isNumber(e.offsetWidth)&&0!==e.offsetWidth?e.offsetWidth:Ni._getStyleAttributeData(e,"width"):0}static getHeight(e){return e?Ni.isNumber(e.offsetHeight)&&0!==e.offsetHeight?e.offsetHeight:Ni._getStyleAttributeData(e,"height"):0}static show(e){e&&(e.style.display="block")}static hide(e){e&&(e.style.display="none")}static removeElement(e){if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(t){console.warn(t)}}static isEmptyObject(e){return!(!e||"object"!=typeof e||0!==Object.keys(e).length)}static get consoleStyle(){return"color: white; background-color: #00ACC1; padding:1px 3px; border-radius: 3px; margin-right: 7px"}static get consoleStyle2(){return"color: white; background-color: #FB8C00; padding:1px 3px; border-radius: 3px; margin-right: 7px"}static get consolePrepend2(){return navigator&&navigator.userAgent&&/(edge|xbox|msie|trident)/i.test(navigator.userAgent)?"om-sdk-manager:":"om-sdk-manager%c"}static get consolePrepend(){return navigator&&navigator.userAgent&&/(edge|xbox|msie|trident)/i.test(navigator.userAgent)?"RMP-VAST:":"%crmp-vast%c"}static logVideoEvents(e,t){["loadstart","durationchange","playing","waiting","loadedmetadata","loadeddata","canplay","canplaythrough"].forEach((t=>{e.addEventListener(t,(e=>{e&&e.type}))}))}static isNumber(e){return!("number"!=typeof e||!Number.isFinite(e))}static openWindow(e){try{window.open(e,"_blank")}catch(t){console.warn(t)}}static ajax(e,t,n,r=0){return new Promise(((i,a)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.timeout=t,n&&(s.withCredentials=!0),s.onloadend=()=>{"number"==typeof s.status&&s.status>=200&&s.status<300?i("XMLHttpRequest request succeeded"):r<1||"number"!=typeof r?a(`XMLHttpRequest wrong status code: ${s.status}`):Ni.ajax(e,t,n,r-1)},s.ontimeout=()=>{r<1||"number"!=typeof r?a("XMLHttpRequest timeout"):Ni.ajax(e,t,n,r-1)},s.send(null)}))}static addEvents(e,t,n){e&&e.length>1&&t&&"function"==typeof n&&e.forEach((e=>{t.addEventListener(e,n)}))}static removeEvents(e,t,n){e&&e.length>1&&t&&"function"==typeof n&&e.forEach((e=>{t.removeEventListener(e,n)}))}static clearTimeout(e){"number"==typeof e&&window.clearTimeout(e)}static clearInterval(e){"number"==typeof e&&window.clearInterval(e)}}class Ui{static _filterVersion(e){if(navigator.userAgent){const t=navigator.userAgent.match(e);if(Array.isArray(t)&&void 0!==t[1])return parseInt(t[1],10)}return-1}static get _testVideo(){return document.createElement("video")}static get hasTouchEvents(){return!!(void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof window.DocumentTouch)}static get userAgent(){return navigator.userAgent?navigator.userAgent:null}static get devicePixelRatio(){let e=1;return Ni.isNumber(window.devicePixelRatio)&&window.devicePixelRatio>1&&(e=window.devicePixelRatio),e}static get maxTouchPoints(){return"number"==typeof navigator.maxTouchPoints?navigator.maxTouchPoints:-1}static get isIos(){const e=/os\s+(\d+)_/i;let t=[!1,-1];return/(ipad|iphone|ipod)/i.test(Ui.userAgent)&&Ui.hasTouchEvents&&(t=[!0,Ui._filterVersion(e)]),t}static get isIpadOS(){return!!(!Ui.isIos[0]&&Ui.hasTouchEvents&&/macintel/i.test(navigator.platform)&&Ui.devicePixelRatio>1&&Ui.maxTouchPoints>1)}static get isMacOS(){const e=/mac\s+os\s+x\s+(\d+)_(\d+)/i;let t=!1,n=-1;return Ui.isIos[0]||Ui.isIpadOS||!/(macintosh|mac\s+os)/i.test(Ui.userAgent)||(t=!0,n=Ui._filterVersion(e,!0)),[t,n]}static get isSafari(){const e=/version\/(\d+)\./i;let t=!1,n=-1;return/safari\/[.0-9]*/i.test(Ui.userAgent)&&!/(chrome|chromium|android|crios|fxios)/i.test(Ui.userAgent)&&(t=!0,n=Ui._filterVersion(e)),[t,n]}static get isMacOSSafari(){return Ui.isMacOS[0]&&Ui.isSafari[0]}static get isAndroid(){const e=/android\s*(\d+)\./i;let t=[!1,-1];return!Ui.isIos[0]&&Ui.hasTouchEvents&&/android/i.test(Ui.userAgent)&&(t=[!0,Ui._filterVersion(e)]),t}static get isMobile(){return!!(Ui.isIos[0]||Ui.isAndroid[0]||Ui.isIpadOS)}static get hasNativeFullscreenSupport(){const e=document.documentElement,t=Ui._testVideo;return!(!e||void 0===e.requestFullscreen&&void 0===e.webkitRequestFullscreen&&void 0===e.mozRequestFullScreen&&void 0===e.msRequestFullscreen&&void 0===t.webkitEnterFullscreen)}static checkCanPlayType(e,t){const n=Ui._testVideo;if("undefined"!==n.canPlayType){if((Ui.isSafari[0]||Ui.isIpadOS[0]||Ui.isIos[0])&&"video/webm"===e)return!1;if(e&&t){let i;try{i=n.canPlayType(`${e}; codecs="${t}"`)}catch(r){return i=n.canPlayType(e),"probably"===i}if(""!==i)return!0}else if(e&&!t){if(""!==n.canPlayType(e))return!0}}return!1}}class Li{static _dispatch(e){const t=this.trackingTags.filter((t=>e===t.event));t.length>0&&t.forEach((e=>{Li.pingURI.call(this,e.url)}))}static _vastReadableTime(e){if(Ni.isNumber(e)&&e>=0){let t=0,n=0,r=0,i=Math.floor(e%1e3);return i=0===i?"000":i<10?`00${i}`:i<100?`0${i}`:i.toString(),t=Math.floor(1*e/1e3),t>59&&(n=Math.floor(1*t/60),t-=60*n),t=0===t?"00":t<10?`0${t}`:t.toString(),n>59&&(r=Math.floor(1*n/60),n-=60*r),n=0===n?"00":n<10?`0${n}`:n.toString(),r=0===r?"00":r<10?`0${r}`:r>23?"00":r.toString(),`${r}:${n}:${t}.${i}`}return"00:00:00.000"}static _generateCacheBusting(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(62*Math.random()));return e}static _ping(e){if(/\.js$/i.test(e)){const n=document.createElement("script");n.src=e;try{document.head.appendChild(n)}catch(t){console.warn(t),document.body.appendChild(n)}}else Ni.ajax(e,this.params.ajaxTimeout,!1,2).then((()=>{})).catch((e=>{}))}static _onVolumeChange(){this.__adPlayer.muted||0===this.__adPlayer.volume?(Oi.createApiEvent.call(this,"advolumemuted"),Li.dispatch.call(this,"mute")):!this.__adPlayer.muted&&this.__adPlayer.volume>0&&Li.dispatch.call(this,"unmute"),Oi.createApiEvent.call(this,"advolumechanged")}static _onTimeupdate(){let e=-1,t=-1;this.rmpVastAdPlayer&&(t=this.rmpVastAdPlayer.currentTime,e=this.rmpVastAdPlayer.duration),t>0&&e>0&&e>t&&(t>=.25*e&&!this.firstQuartileEventFired?(this.firstQuartileEventFired=!0,Oi.createApiEvent.call(this,"adfirstquartile"),Li.dispatch.call(this,"firstQuartile")):t>=.5*e&&!this.midpointEventFired?(this.midpointEventFired=!0,Oi.createApiEvent.call(this,"admidpoint"),Li.dispatch.call(this,"midpoint")):t>=.75*e&&!this.thirdQuartileEventFired&&(this.thirdQuartileEventFired=!0,Oi.createApiEvent.call(this,"adthirdquartile"),Li.dispatch.call(this,"thirdQuartile")),t>=2e3&&!this.progressEventFired&&(this.progressEventFired=!0,Oi.createApiEvent.call(this,"adprogress"),Li.dispatch.call(this,"progress-2")),Object.entries(this.params.timeEvents).forEach((([n,r])=>{if(!this.timeEventsFired[n]){(r<0&&t>=e+r||r>=0&&t>=r)&&(this.timeEventsFired[n]=!0,Oi.createApiEvent.call(this,n))}})))}static _onPause(){if(this.__adPlayer&&this.__adPlayer.paused){if(this.__adPlayer.currentTime===this.__adPlayer.duration)return;Oi.createApiEvent.call(this,"adpaused"),Li.dispatch.call(this,"pause")}}static _onPlay(){this.__adPlayer&&!this.__adPlayer.paused&&0!==this.__adPlayer.currentTime&&(Oi.createApiEvent.call(this,"adresumed"),Li.dispatch.call(this,"resume"))}static _onPlaying(){Oi.createApiEvent.call(this,["adimpression","adstarted"]),Li.dispatch.call(this,["start","creativeView","impression"])}static _onEnded(){Oi.createApiEvent.call(this,"adcomplete"),Li.dispatch.call(this,"complete"),this.rmpVastAdPlayer&&(this.params.pauseOnEnd?this.__adPlayer.pause():this.rmpVastAdPlayer.resumeContent())}static replaceMacros(e,t){if(!/\[.+?\]/i.test(e))return e;let n=e;const r=/\[(ADCOUNT|TRANSACTIONID|PLACEMENTTYPE|BREAKMAXDURATION|BREAKMINDURATION|BREAKMAXADS|BREAKMINADLENGTH|BREAKMAXADLENGTH|IFA|IFATYPE|CLIENTUA|SERVERUA|DEVICEIP|APPBUNDLE|EXTENSIONS|INVENTORYSTATE|CONTENTID|LATLONG)\]/gi;r.test(n)&&(n=n.replace(r,"-1"));const i=/\[(CONTENTURI|CLICKPOS)\]/gi;i.test(n)&&(n=n.replace(i,"-2"));const a=/\[TIMESTAMP\]/gi,s=(new Date).toISOString();a.test(n)&&(n=n.replace(a,encodeURIComponent(s)));const o=/\[CACHEBUSTING\]/gi;o.test(n)&&(n=n.replace(o,Li._generateCacheBusting()));const l=/\[(CONTENTPLAYHEAD|MEDIAPLAYHEAD)\]/gi;let c=this.rmpVastContentPlayer.currentTime;l.test(n)&&c>-1&&(n=n.replace(l,encodeURIComponent(Li._vastReadableTime(c))));const d=/\[BREAKPOSITION\]/gi;let u=-1;this.rmpVastAdPlayer&&(u=this.rmpVastAdPlayer.duration),d.test(n)&&(n=0===c?n.replace(d,"1"):c>0&&c<u?n.replace(d,"2"):n.replace(d,"3"));const h=/\[ADTYPE\]/gi;h.test(n)&&this.ad.adType&&(n=n.replace(h,encodeURIComponent(this.ad.adType)));const p=/\[DEVICEUA\]/gi;p.test(n)&&Ui.userAgent&&(n=n.replace(p,encodeURIComponent(Ui.userAgent)));const _=/\[SERVERSIDE\]/gi;_.test(n)&&Ui.userAgent&&(n=n.replace(_,"0"));const m=/\[DOMAIN\]/gi;m.test(n)&&window.location.hostname&&(n=n.replace(m,encodeURIComponent(window.location.hostname)));const f=/\[PAGEURL\]/gi;f.test(n)&&window.location.href&&(n=n.replace(f,encodeURIComponent(window.location.href)));const g=/\[PLAYERCAPABILITIES\]/gi;g.test(n)&&(n=n.replace(g,"skip,mute,autoplay,mautoplay,fullscreen,icon"));const v=/\[CLICKTYPE\]/gi;if(v.test(n)){let e="1";Ui.isMobile&&(e="2"),n=n.replace(v,e)}const y=/\[PLAYERSIZE\]/gi;if(y.test(n)){const e=parseInt(Ni.getWidth(this.container),10),t=parseInt(Ni.getHeight(this.container),10);n=n.replace(y,encodeURIComponent(`${e.toString()},${t.toString()}`))}if(t){const e=/\[ADPLAYHEAD\]/gi;let t=-1;this.rmpVastAdPlayer&&(t=this.rmpVastAdPlayer.currentTime),e.test(n)&&t>-1&&(n=n.replace(e,encodeURIComponent(Li._vastReadableTime(t))));const r=/\[UNIVERSALADID\]/gi;if(r.test(n)&&this.creative.universalAdIds.length>0){let e="";this.creative.universalAdIds.forEach(((t,n)=>{0===n&&n===this.creative.universalAdIds.length-1||(e+=","),e+=`${t.idRegistry} ${t.value}`})),n=n.replace(r,encodeURIComponent(e))}const i=/\[ASSETURI\]/gi,a=this.adMediaUrl;i.test(n)&&"string"==typeof a&&""!==a&&(n=n.replace(i,encodeURIComponent(a)));const s=/\[PODSEQUENCE\]/gi;s.test(n)&&this.ad.sequence&&(n=n.replace(s,encodeURIComponent(this.ad.sequence.toString())));const o=/\[ADSERVINGID\]/gi;o.test(n)&&this.ad.adServingId&&(n=n.replace(o,encodeURIComponent(this.ad.adServingId)))}else{const e=/\[VASTVERSIONS\]/gi;e.test(n)&&(n=n.replace(e,"2,3,5,6,7,8,11,12,13,14"));const t=/\[APIFRAMEWORKS\]/gi;t.test(n)&&(n=n.replace(t,"2"));const r=/\[MEDIAMIME\]/gi,i=["video/webm","video/mp4","video/ogg","video/3gpp","application/vnd.apple.mpegurl","application/dash+xml"];if(r.test(n)){let e="";i.forEach((t=>{Ui.checkCanPlayType(t)&&(e+=`${t},`)})),e&&(e=e.slice(0,-1),n=n.replace(r,encodeURIComponent(e)))}const a=/\[PLAYERSTATE\]/gi;if(a.test(n)){let e="";this.rmpVastContentPlayer.muted&&(e+="muted"),this.isInFullscreen&&(e&&(e+=","),e+="fullscreen"),n=n.replace(a,e)}}const b=/\[LIMITADTRACKING\]/gi;b.test(n)&&this.regulationsInfo.limitAdTracking&&(n=n.replace(b,encodeURIComponent(this.regulationsInfo.limitAdTracking)));const A=/\[REGULATIONS\]/gi;A.test(n)&&this.regulationsInfo.regulations&&(n=n.replace(A,encodeURIComponent(this.regulationsInfo.regulations)));const E=/\[GDPRCONSENT\]/gi;return E.test(n)&&this.regulationsInfo.gdprConsent&&(n=n.replace(E,encodeURIComponent(this.regulationsInfo.gdprConsent))),n}static pingURI(e){const t=Li.replaceMacros.call(this,e,!0);Li._ping.call(this,t)}static error(e,t){let n=this.adErrorTags;303===e&&this.vastErrorTags.length>0&&(n=[...n,...this.vastErrorTags]),n.length>0&&n.forEach((n=>{if(n.url){let r=n.url;const i=/\[ERRORCODE\]/gi;if(i.test(r)&&Ni.isNumber(e)&&e>0&&e<1e3&&(r=r.replace(i,e)),t){const e=JSON.stringify(t),n=encodeURIComponent(e),i=`${r}${-1!==r.indexOf("?")?"&":"?"}extra=${n}`;r=i}Li._ping.call(this,r)}}))}static dispatch(e){Array.isArray(e)?e.forEach((e=>{Li._dispatch.call(this,e)})):Li._dispatch.call(this,e)}static destroy(){this.__adPlayer&&(this.__adPlayer.removeEventListener("pause",this.onPauseFn),this.__adPlayer.removeEventListener("play",this.onPlayFn),this.__adPlayer.removeEventListener("playing",this.onPlayingFn),this.__adPlayer.removeEventListener("ended",this.onEndedFn),this.__adPlayer.removeEventListener("volumechange",this.onVolumeChangeFn),this.__adPlayer.removeEventListener("timeupdate",this.onTimeupdateFn))}static wire(){this.__adPlayer&&this.creative.isLinear&&!this.rmpVastVpaidPlayer&&(this.onPauseFn=Li._onPause.bind(this),this.__adPlayer.addEventListener("pause",this.onPauseFn),this.onPlayFn=Li._onPlay.bind(this),this.__adPlayer.addEventListener("play",this.onPlayFn),this.onPlayingFn=Li._onPlaying.bind(this),this.__adPlayer.addEventListener("playing",this.onPlayingFn,{once:!0}),this.onEndedFn=Li._onEnded.bind(this),this.__adPlayer.addEventListener("ended",this.onEndedFn,{once:!0}),this.onVolumeChangeFn=Li._onVolumeChange.bind(this),this.__adPlayer.addEventListener("volumechange",this.onVolumeChangeFn),this.onTimeupdateFn=Li._onTimeupdate.bind(this),this.__adPlayer.addEventListener("timeupdate",this.onTimeupdateFn))}}class Oi{static _onFullscreenchange(e){e&&e.type&&("fullscreenchange"===e.type?this.isInFullscreen?(this.isInFullscreen=!1,this.__adOnStage&&this.creative.isLinear&&Li.dispatch.call(this,["exitFullscreen","playerCollapse"])):(this.isInFullscreen=!0,this.__adOnStage&&this.creative.isLinear&&Li.dispatch.call(this,["fullscreen","playerExpand"])):"webkitbeginfullscreen"===e.type?(this.__adOnStage&&this.creative.isLinear&&Li.dispatch.call(this,["fullscreen","playerExpand"]),this.isInFullscreen=!0):"webkitendfullscreen"===e.type&&(this.__adOnStage&&this.creative.isLinear&&Li.dispatch.call(this,["exitFullscreen","playerCollapse"]),this.isInFullscreen=!1))}static _updateVastError(e){const t=[201,204,205,400,401,402,403,501,502,503,603,901,1002],n=[303,900,1001],r=[{code:201,description:"Video player expecting different linearity."},{code:303,description:"No VAST response after one or more Wrappers."},{code:400,description:"General Linear error. Video player is unable to display the Linear Ad."},{code:401,description:"File not found. Unable to find Linear/MediaFile from URI."},{code:402,description:"Timeout of MediaFile URI."},{code:403,description:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},{code:501,description:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},{code:502,description:"Unable to fetch NonLinearAds/NonLinear resource."},{code:503,description:"Could not find NonLinear resource with supported type."},{code:603,description:"Unable to fetch CompanionAds/Companion resource."},{code:900,description:"Undefined Error."},{code:901,description:"General VPAID error."},{code:1001,description:"Invalid input for loadAds method"},{code:1002,description:"Required DOMParser API is not available"}].filter((t=>t.code===e));r.length>0?(this.__vastErrorCode=r[0].code,this.__adErrorMessage=r[0].description):(this.__vastErrorCode=-1,this.__adErrorMessage="Error getting VAST error"),this.__vastErrorCode>-1&&(n.indexOf(this.__vastErrorCode)>-1?this.__adErrorType="adLoadError":t.indexOf(this.__vastErrorCode)>-1&&(this.__adErrorType="adPlayError"))}static filterParams(e){if(this.params={ajaxTimeout:5e3,creativeLoadTimeout:8e3,ajaxWithCredentials:!1,maxNumRedirects:4,labels:{skipMessage:"Skip ad",closeAd:"Close ad",textForInteractionUIOnMobile:"Learn more"},outstream:!1,showControlsForAdPlayer:!1,vastXmlInput:!1,enableVpaid:!0,vpaidSettings:{width:640,height:360,viewMode:"normal",desiredBitrate:500},partnerName:"rmp-vast",partnerVersion:"13.2.0",pauseOnEnd:!1,timeEvents:{},clickThroughElementId:""},e&&"object"==typeof e){Object.keys(e).forEach((t=>{typeof e[t]==typeof this.params[t]&&(Ni.isNumber(e[t])&&e[t]>0||"number"!=typeof e[t])&&("vpaidSettings"===t?(Ni.isNumber(e.vpaidSettings.width)&&e.vpaidSettings.width>0&&(this.params.vpaidSettings.width=e.vpaidSettings.width),Ni.isNumber(e.vpaidSettings.height)&&e.vpaidSettings.height>0&&(this.params.vpaidSettings.height=e.vpaidSettings.height),"string"==typeof e.vpaidSettings.viewMode&&"fullscreen"===e.vpaidSettings.viewMode&&(this.params.vpaidSettings.viewMode=e.vpaidSettings.viewMode),Ni.isNumber(e.vpaidSettings.desiredBitrate)&&e.vpaidSettings.desiredBitrate>0&&(this.params.vpaidSettings.desiredBitrate=e.vpaidSettings.desiredBitrate)):this.params[t]=e[t])}))}}static createApiEvent(e){Array.isArray(e)?e.forEach((e=>{e&&this.dispatch(e)})):e&&this.dispatch(e)}static playPromise(e,t){let n;switch(e){case"content":n=this.__contentPlayer;break;case"vast":n=this.__adPlayer}if(n){const r=n.play();void 0!==r&&r.then((()=>{t&&Oi.createApiEvent.call(this,"adinitialplayrequestsucceeded")})).catch((n=>{console.warn(n),t&&"vast"===e&&this.creative.isLinear?(Oi.createApiEvent.call(this,"adinitialplayrequestfailed"),this.rmpVastAdPlayer.appendPlayButton()):t&&"content"===e&&!this.creative.isLinear&&Oi.createApiEvent.call(this,"adinitialplayrequestfailed")}))}}static makeButtonAccessible(e,t){e.tabIndex=0,e.setAttribute("role","button"),e.addEventListener("keyup",(t=>{const n=t.which;13!==n&&32!==n||(t.stopPropagation(),t.preventDefault(),Ni.createSyntheticEvent("click",e))})),t&&e.setAttribute("aria-label",t)}static initInstanceVariables(){this.adContainer=null,this.contentWrapper=null,this.container=null,this.rmpVastContentPlayer=null,this.rmpVastAdPlayer=null,this.currentContentSrc="",this.currentContentCurrentTime=-1,this.params={},this.events={},this.onFullscreenchangeFn=null,this.id=null,this.isInFullscreen=!1,this.adPod=!1,this.adPodLength=0,this.adSequence=0,this.__contentPlayer=null,this.__adPlayer=null,this.__initialized=!1,this.__contentPlayerCompleted=!1}static resetVariablesForNewLoadAds(){this.off("adstarted",this.attachViewableObserverFn),this.onPauseFn=null,this.onPlayFn=null,this.onPlayingFn=null,this.onEndedFn=null,this.onVolumeChangeFn=null,this.onTimeupdateFn=null,this.trackingTags=[],this.vastErrorTags=[],this.adErrorTags=[],this.firstQuartileEventFired=!1,this.midpointEventFired=!1,this.progressEventFired=!1,this.thirdQuartileEventFired=!1,this.needsSeekAdjust=!1,this.seekAdjustAttached=!1,this.ad={},this.creative={},this.attachViewableObserverFn=null,this.viewableObserver=null,this.viewablePreviousRatio=.5,this.regulationsInfo={},this.progressEvents=[],this.rmpVastLinearCreative=null,this.companionAdsList=[],this.rmpVastVpaidPlayer=null,this.adParametersData="",this.__adTagUrl="",this.__vastErrorCode=-1,this.__adErrorType="",this.__adErrorMessage="",this.__adOnStage=!1,this.timeEventsFired={},this.clickThroughElement=null}static handleFullscreen(){Ui.hasNativeFullscreenSupport&&(this.onFullscreenchangeFn=Oi._onFullscreenchange.bind(this),Ui.isIos[0]?(this.__contentPlayer.addEventListener("webkitbeginfullscreen",this.onFullscreenchangeFn),this.__contentPlayer.addEventListener("webkitendfullscreen",this.onFullscreenchangeFn)):document.addEventListener("fullscreenchange",this.onFullscreenchangeFn))}static processVastErrors(e,t,n){t&&Li.error.call(this,e,n),Oi._updateVastError.call(this,e),Oi.createApiEvent.call(this,"aderror"),this.rmpVastAdPlayer&&this.rmpVastAdPlayer.resumeContent()}}class xi{constructor(e){this._rmpVast=e,this._params=e.params,this._container=e.container,this._adContainer=e.adContainer,this._adPlayer=e.__adPlayer,this._contentPlayer=e.__contentPlayer,this._firstAdPlayerPlayRequest=!0,this._interactionMobileUI=null,this._skipWaitingUI=null,this._skipMessageUI=null,this._skipIconUI=null,this._skipButtonUI=null,this._skippableAdCanBeSkipped=!1,this._onSkipInteractionFn=null,this._onTimeupdateCheckSkipFn=null,this._onDurationChangeFn=null,this._onLoadedmetadataPlayFn=null,this._onContextMenuFn=null,this._onPlaybackErrorFn=null,this._onInteractionOpenClickThroughUrlFn=null,this._creativeLoadTimeoutCallback=null}get skippableAdCanBeSkipped(){return this._skippableAdCanBeSkipped}_onDurationChange(){let e=-1;if(this._rmpVast.rmpVastAdPlayer&&(e=this._rmpVast.rmpVastAdPlayer.duration),Oi.createApiEvent.call(this._rmpVast,"addurationchange"),-1===e)return;Object.keys(this._rmpVast.creative.trackingEvents).forEach((t=>{if(/progress-/i.test(t)){const n=t.split("-")[1];if(/%/i.test(n)){let r=n.slice(0,-1);r=e*parseFloat(r)/100;this._rmpVast.creative.trackingEvents[t].forEach((e=>{this._rmpVast.progressEvents.push({time:r,url:e})}))}else{this._rmpVast.creative.trackingEvents[t].forEach((e=>{this._rmpVast.progressEvents.push({time:1e3*parseFloat(n),url:e})}))}}})),this._rmpVast.progressEvents.length>0&&this._rmpVast.progressEvents.sort(((e,t)=>e.time-t.time))}_onLoadedmetadataPlay(){Ni.clearTimeout(this._creativeLoadTimeoutCallback),this._adPlayer&&(this._adPlayer.volume!==this._contentPlayer.volume&&(this._adPlayer.volume=this._contentPlayer.volume),this._contentPlayer.muted?this._adPlayer.muted=!0:this._adPlayer.muted=!1),Ni.show(this._adContainer),Ni.show(this._adPlayer),this._rmpVast.__adOnStage=!0,this._rmpVast.rmpVastAdPlayer&&(this._rmpVast.rmpVastAdPlayer.play(this._firstAdPlayerPlayRequest),this._firstAdPlayerPlayRequest=!1),Oi.createApiEvent.call(this._rmpVast,"adloaded"),Li.dispatch.call(this._rmpVast,"loaded")}_onInteractionOpenClickThroughUrl(e){e&&e.stopPropagation(),Oi.createApiEvent.call(this._rmpVast,"adclick"),Li.dispatch.call(this._rmpVast,"clickthrough")}_onPlaybackError(e){if(e&&e.target){const t=e.target;if(t.error&&Ni.isNumber(t.error.code)){const e=t.error.code;let n="";"string"==typeof t.error.message&&(n=t.error.message);if(4===e){const e={errorCode:t.error.code,errorMessage:t.error.message,videoNetworkState:t.networkState,videoReadyState:t.readyState,videoSrc:t.src,videoCurrentSrc:t.currentSrc};Oi.processVastErrors.call(this._rmpVast,401,!0,e)}}}}_onContextMenu(e){e&&(e.stopPropagation(),e.preventDefault())}_updateWaitingForCanBeSkippedUI(e){Math.round(e)>0&&(this._skipWaitingUI.textContent=`${this._params.labels.skipMessage} ${Math.round(e)}s`)}_onTimeupdateCheckSkip(){"none"===this._skipButtonUI.style.display&&Ni.setStyle(this._skipButtonUI,{display:"block"});const e=this._adPlayer.currentTime;Ni.isNumber(e)&&e>0&&(e>=this._rmpVast.creative.skipoffset?(this._adPlayer.removeEventListener("timeupdate",this._onTimeupdateCheckSkipFn),Ni.setStyle(this._skipWaitingUI,{display:"none"}),Ni.setStyle(this._skipMessageUI,{display:"block"}),Ni.setStyle(this._skipIconUI,{display:"block"}),this._skippableAdCanBeSkipped=!0,Oi.createApiEvent.call(this._rmpVast,"adskippablestatechanged")):this._rmpVast.creative.skipoffset-e>0&&this._updateWaitingForCanBeSkippedUI(this._rmpVast.creative.skipoffset-e))}_onSkipInteraction(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),this._skippableAdCanBeSkipped&&(Oi.createApiEvent.call(this._rmpVast,"adskipped"),Li.dispatch.call(this._rmpVast,"skip"),this._rmpVast.rmpVastAdPlayer&&this._rmpVast.rmpVastAdPlayer.resumeContent())}_appendSkipUI(){this._skipButtonUI=document.createElement("div"),this._skipButtonUI.className="rmp-ad-container-skip",Ni.setStyle(this._skipButtonUI,{display:"none"}),Oi.makeButtonAccessible(this._skipButtonUI,this._params.labels.skipMessage),this._skipWaitingUI=document.createElement("div"),this._skipWaitingUI.className="rmp-ad-container-skip-waiting",this._updateWaitingForCanBeSkippedUI(this._rmpVast.creative.skipoffset),Ni.setStyle(this._skipWaitingUI,{display:"block"}),this._skipMessageUI=document.createElement("div"),this._skipMessageUI.className="rmp-ad-container-skip-message",this._skipMessageUI.textContent=this._params.labels.skipMessage,Ni.setStyle(this._skipMessageUI,{display:"none"}),this._skipIconUI=document.createElement("div"),this._skipIconUI.className="rmp-ad-container-skip-icon",Ni.setStyle(this._skipIconUI,{display:"none"}),this._onSkipInteractionFn=this._onSkipInteraction.bind(this),Ni.addEvents(["click","touchend"],this._skipButtonUI,this._onSkipInteractionFn),this._skipButtonUI.appendChild(this._skipWaitingUI),this._skipButtonUI.appendChild(this._skipMessageUI),this._skipButtonUI.appendChild(this._skipIconUI),this._adContainer.appendChild(this._skipButtonUI),this._onTimeupdateCheckSkipFn=this._onTimeupdateCheckSkip.bind(this),this._adPlayer.addEventListener("timeupdate",this._onTimeupdateCheckSkipFn)}destroy(){this._interactionMobileUI&&(this._interactionMobileUI.removeEventListener("touchend",this._onInteractionOpenClickThroughUrlFn),Ni.removeElement(this._interactionMobileUI)),Ni.clearTimeout(this._creativeLoadTimeoutCallback),Ni.removeElement(this._skipButtonUI),Ni.removeEvents(["click","touchend"],this._skipButtonUI,this._onSkipInteractionFn),this._adPlayer&&(this._adPlayer.removeEventListener("click",this._onInteractionOpenClickThroughUrlFn),this._adPlayer.removeEventListener("timeupdate",this._onTimeupdateCheckSkipFn),this._adPlayer.removeEventListener("durationchange",this._onDurationChangeFn),this._adPlayer.removeEventListener("loadedmetadata",this._onLoadedmetadataPlayFn),this._adPlayer.removeEventListener("contextmenu",this._onContextMenuFn),this._adPlayer.removeEventListener("error",this._onPlaybackErrorFn)),this._contentPlayer.removeEventListener("error",this._onPlaybackErrorFn),this.clickThroughElement&&this.clickThroughElement.removeEventListener("click",this._onInteractionOpenClickThroughUrlFn)}update(e,t){this._onDurationChangeFn=this._onDurationChange.bind(this),this._adPlayer.addEventListener("durationchange",this._onDurationChangeFn,{once:!0}),this._onLoadedmetadataPlayFn=this._onLoadedmetadataPlay.bind(this),this._adPlayer.addEventListener("loadedmetadata",this._onLoadedmetadataPlayFn,{once:!0}),this._onContextMenuFn=this._onContextMenu.bind(this),this._adPlayer.addEventListener("contextmenu",this._onContextMenuFn),this._onPlaybackErrorFn=this._onPlaybackError.bind(this),this._creativeLoadTimeoutCallback=setTimeout((()=>{const e=this._adPlayer,t={videoNetworkState:e.networkState,videoReadyState:e.readyState,videoSrc:e.src,videoCurrentSrc:e.currentSrc};Oi.processVastErrors.call(this._rmpVast,402,!0,t)}),this._params.creativeLoadTimeout),this._adPlayer.addEventListener("error",this._onPlaybackErrorFn),this._adPlayer.src=e,this._adPlayer.load(),this._onInteractionOpenClickThroughUrlFn=this._onInteractionOpenClickThroughUrl.bind(this),this._rmpVast.creative.clickThroughUrl&&(this.clickThroughElement=this._params.clickThroughElementId&&document.getElementById(this._params.clickThroughElementId),this.clickThroughElement?this.clickThroughElement.addEventListener("click",this._onInteractionOpenClickThroughUrlFn):Ui.isMobile?(this._interactionMobileUI=document.createElement("a"),this._interactionMobileUI.className="rmp-ad-click-ui-mobile",this._interactionMobileUI.textContent=this._params.labels.textForInteractionUIOnMobile,this._interactionMobileUI.addEventListener("touchend",this._onInteractionOpenClickThroughUrlFn),this._interactionMobileUI.href=this._rmpVast.creative.clickThroughUrl,this._interactionMobileUI.target="_blank",this._adContainer.appendChild(this._interactionMobileUI)):this._adPlayer.addEventListener("click",this._onInteractionOpenClickThroughUrlFn)),this._rmpVast.creative.isSkippableAd&&this._appendSkipUI()}parse(e){const t=e.mediaFiles;if(0===t.length)return;const n="hvc1",r="avc1.4d401f",i="vp9",a=e=>{if(e.codec&&e.mimeType)return e.codec;if("video/mp4"===e.mimeType&&e.fileURL.endsWith("-x265.mp4"))return n;if(e.mimeType)switch(e.mimeType){case"video/mp4":return r;case"video/webm":return i;default:return null}return null},s=["video/mp4","video/webm"],o=t.filter((e=>null!==e.fileURL&&null!==e.mimeType&&s.includes(e.mimeType)&&(e=>{const t=a(e);return!!t&&Ui.checkCanPlayType(e.mimeType,t)})(e)));if(0===o.length){const e=t.findAll((e=>"video/mp4"===e.mimeType&&a(e)===r));o.push(...e)}const l=e=>{const{width:t,height:s,bitrate:o}=e;if(o)return o;return{[r]:87e-5,[i]:61e-5,[n]:76e-5}[a(e)]*t*s},c=new Ri,d=c.bandwidthData.estimate>-1,u=e=>{const{width:t,height:n}=e;let r=1;if(d){const t=Math.round(1e3*c.bandwidthData.estimate);r*=Math.min(t/l(e),1)}if(t&&n){const e=Math.min(t/(Ni.getWidth(this._container)*Ui.devicePixelRatio),n/(Ni.getHeight(this._container)*Ui.devicePixelRatio));r*=Math.min(1,e)}return r};let h,p=0;for(let _=0;_<o.length;_++){const e=u(o[_]);e>p?(p=e,h=o[_]):e===p&&(h=l(o[_])<l(h)?o[_]:h)}this._rmpVast.creative.mediaUrl=h.fileURL,this._rmpVast.creative.height=h.height,this._rmpVast.creative.width=h.width,this._rmpVast.creative.type=h.mimeType,this._rmpVast.rmpVastAdPlayer&&this._rmpVast.rmpVastAdPlayer.append(h.fileURL,h.mimeType)}}class Di{constructor(e){this.eventName=e,this.callbacks=[]}registerCallback(e){this.callbacks.push(e)}unregisterCallback(e){const t=this.callbacks.indexOf(e);t>-1&&this.callbacks.splice(t,1)}fire(e){this.callbacks.slice(0).forEach((t=>{t(e)}))}}class Fi{constructor(e){this._rmpVast=e,this._params=e.params,this._contentPlayer=e.__contentPlayer,this._adContainer=e.adContainer,this._contentWrapper=e.contentWrapper,this._adPlayer=null,this._onTimeUpdateFn=null,this._onProgressFn=null,this._onPlayButtonClickFn=null}destroy(){this._rmpVast.rmpVastVpaidPlayer&&this._rmpVast.rmpVastVpaidPlayer.destroy(),this._rmpVast.rmpVastLinearCreative&&this._rmpVast.rmpVastLinearCreative.destroy(),this._onTimeUpdateFn&&this._adPlayer.removeEventListener("timeupdate",this._onTimeUpdateFn),this._onProgressFn&&this._adPlayer.removeEventListener("progress",this._onProgressFn),this._onPlayButtonClickFn&&this._adPlayer.removeEventListener("click",this._onPlayButtonClickFn),Li.destroy.call(this._rmpVast),Ni.hide(this._adContainer),this._rmpVast.rmpVastContentPlayer&&this._rmpVast.rmpVastContentPlayer.destroy();try{this._adPlayer&&(this._adPlayer.pause(),this._adPlayer.removeAttribute("src"),this._adPlayer.load(),Ni.hide(this._adPlayer))}catch(e){console.warn(e)}Oi.resetVariablesForNewLoadAds.call(this._rmpVast),Oi.createApiEvent.call(this._rmpVast,"addestroyed")}init(){this._rmpVast.adContainer=this._adContainer=document.createElement("div"),this._adContainer.className="rmp-ad-container",this._contentWrapper.appendChild(this._adContainer),Ni.hide(this._adContainer),this._rmpVast.__adPlayer=this._adPlayer=document.createElement("video"),Ni.logVideoEvents(this._adPlayer,"ad"),this._adPlayer.disableRemotePlayback=!0,this._adPlayer.disablePictureInPicture=!0,this._adPlayer.className="rmp-ad-vast-video-player",this._params.showControlsForAdPlayer?this._adPlayer.controls=!0:this._adPlayer.controls=!1,this._contentPlayer.hasAttribute("muted")&&(this._contentPlayer.muted=!0),this._contentPlayer.muted&&(this._adPlayer.muted=!0),this._adPlayer.poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",this._adPlayer.setAttribute("x-webkit-airplay","allow"),"boolean"==typeof this._contentPlayer.playsInline&&this._contentPlayer.playsInline&&(this._adPlayer.playsInline=!0),Ni.hide(this._adPlayer),this._adContainer.appendChild(this._adPlayer),this._contentPlayer.addEventListener("ended",(()=>{this._rmpVast.__adOnStage||(this._rmpVast.__contentPlayerCompleted=!0)})),this._adPlayer.preload="auto",Ui.isMobile&&(this._contentPlayer.load(),this._adPlayer.load()),(Ui.isIos[0]||Ui.isMacOS[0]||Ui.isIpadOS||Ui.isMacOS[0])&&(this._onTimeUpdateFn=this._onTimeUpdate.bind(this),this._adPlayer.addEventListener("timeupdate",this._onTimeUpdateFn),this._onProgressFn=this._onProgress.bind(this),this._adPlayer.addEventListener("progress",this._onProgressFn)),this._rmpVast.__initialized=!0}append(e,t){if(!this._adPlayer){let e=null;if(this._adContainer&&(e=this._adContainer.querySelector(".rmp-ad-vast-video-player")),null===e)return void Oi.processVastErrors.call(this._rmpVast,900,!0);this._adPlayer=e}if(this._rmpVast.rmpVastContentPlayer.pause(),this._rmpVast.creative.isLinear)e&&t&&this._rmpVast.rmpVastLinearCreative&&this._rmpVast.rmpVastLinearCreative.update(e,t);else if(this._params.outstream)return void Oi.processVastErrors.call(this._rmpVast,201,!0);Li.wire.call(this._rmpVast)}appendPlayButton(){const e=document.createElement("div");e.className="rmp-ad-container-play-button";const t=document.createElement("img");t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKESURBVHgB7dztcdNAEIDhNUMBKcHpIKkAUgFDBTgV4FRgUwGhAkMFmApsKiBUIHUAHSy7IzyRE9uxpDt93fvM7Ezy9/bjzmdZIgAAAAAAAAAAjIOqXlls9JH/PRXE5wtt8UcPW5GIyJ5U/iGZxQdBHHo+T8Q7QVha3UoZS+FofUtBc9pMpuwPzWgY35WxVI+G9ZlEVKThZTqisTSRyHzFJI7c4mYymeQyYK9kuKYW3g0rxtIJ2g6/6lgKntN2ZcqxdZ92Y6UDGUtD3oTP8cni3jbqv5Iq7V6mPR5LY++AsgeL9307tg75GFrVlfTw2JpSAnZmFpu+jKWURtAhucXcxtIP6UiKHVA2tVh3OZZST8DOTIr9YSktIwH7Fm0fW1PfA05ZW9zFPraSgJfdW3yJlQgScJ7cYmlJ+CaBkYBqcgn8JRCbcDVTKU5LcwmEDqjHb1cvQ9yy0gH1XFgEeYySBHSMBNT3WwIgAfV8tfn/IAGQgOr8g9mdBPJacK7cYmaV/1MCogPO41V/HXrxHR1wWi4Rqr6MDjguWtWX0QHP+elmHnvhd+iAfX7jed3W4js6oLCV4suXIGf7KlLvAL9M83Fz08Xiu5Q7YGtx2/WTcil2QLnqc+lYah2wlR5UfVkqHdCrqi9LoQO20rOqLxtzB/S26svG2gH+UNXtEH4ZM7YE+IL7wq9lIMY0gvzy7HJIi+/G0AG5RL4yHjSNy1/ecSE4TuPILN4IXqbhUfVVaDiZUvXVaRhUfV3azC+l6pvR+haC5rS6jcWVIIwKC+8vXfooCEuPv7j7adVPBeHZwi6o+o5p8eJVqv6A6L8R29Hizehv//+75vIMAAAAAAAAAIDW/AMZppzFSmxZ4wAAAABJRU5ErkJggg==",t.width=96,t.height=96,e.appendChild(t),this._adContainer.appendChild(e),this._onPlayButtonClickFn=this._onPlayButtonClick.bind(this),this._adPlayer.addEventListener("click",this._onPlayButtonClickFn,{once:!0});const n=setTimeout((()=>{Oi.processVastErrors.call(this,400,!0)}),8e3);this._adPlayer.addEventListener("playing",(()=>{e.remove(),clearTimeout(n)}),{once:!0})}_onPlayButtonClick(){this._adPlayer.play();const e=this._adContainer.querySelector(".rmp-ad-container-play-button");e&&e.remove()}_onTimeUpdate(){this.lastBufferedTime<this._adPlayer.currentTime&&this._adPlayer.pause()}_onProgress(){this.lastBufferedTime>this._adPlayer.currentTime&&this._adPlayer.paused&&this._adPlayer.play()}set volume(e){this._adPlayer&&(this._adPlayer.volume=e)}get volume(){return this._adPlayer?this._adPlayer.volume:-1}set muted(e){this._adPlayer&&(e&&!this._adPlayer.muted?this._adPlayer.muted=!0:!e&&this._adPlayer.muted&&(this._adPlayer.muted=!1))}get muted(){return!!this._adPlayer&&this._adPlayer.muted}get duration(){return this._adPlayer&&Ni.isNumber(this._adPlayer.duration)?1e3*this._adPlayer.duration:-1}get currentTime(){return this._adPlayer&&Ni.isNumber(this._adPlayer.currentTime)?1e3*this._adPlayer.currentTime:-1}get lastBufferedTime(){var e;if(this._adPlayer.buffered&&this._adPlayer.buffered.length>0){const t=null==(e=this._adPlayer.buffered)?void 0:e.end(this._adPlayer.buffered.length-1);if(void 0!==t)return t}return 1/0}play(e){this._adPlayer&&this._adPlayer.paused&&Oi.playPromise.call(this._rmpVast,"vast",e)}pause(){this._adPlayer&&!this._adPlayer.paused&&this._adPlayer.pause()}resumeContent(){this._rmpVast.rmpVastAdPlayer&&this._rmpVast.rmpVastAdPlayer.destroy(),this._rmpVast.__contentPlayerCompleted||this._params.outstream||this._rmpVast.rmpVastContentPlayer.play(),this._rmpVast.__contentPlayerCompleted=!1}}class Mi{constructor(e){this._rmpVast=e,this._contentPlayer=e.__contentPlayer,this._customPlaybackCurrentTime=0,this._antiSeekLogicInterval=null}destroy(){Ni.clearInterval(this._antiSeekLogicInterval)}play(e){this._contentPlayer&&this._contentPlayer.paused&&Oi.playPromise.call(this._rmpVast,"content",e)}pause(){this._contentPlayer&&!this._contentPlayer.paused&&this._contentPlayer.pause()}set volume(e){this._contentPlayer&&(this._contentPlayer.volume=e)}get volume(){return this._contentPlayer?this._contentPlayer.volume:-1}get muted(){return!!this._contentPlayer&&this._contentPlayer.muted}set muted(e){this._contentPlayer&&(e&&!this._contentPlayer.muted?this._contentPlayer.muted=!0:!e&&this._contentPlayer.muted&&(this._contentPlayer.muted=!1))}get currentTime(){return this._contentPlayer&&Ni.isNumber(this._contentPlayer.currentTime)?1e3*this._contentPlayer.currentTime:-1}seekTo(e){Ni.isNumber(e)&&e>=0&&this._contentPlayer&&(this._contentPlayer.currentTime=e/1e3)}preventSeekingForCustomPlayback(){this._contentPlayer&&(this._antiSeekLogicInterval=setInterval((()=>{if(this._rmpVast.creative.isLinear&&this._rmpVast.__adOnStage){Math.abs(this._customPlaybackCurrentTime-this._contentPlayer.currentTime)>1&&(this._contentPlayer.currentTime=this._customPlaybackCurrentTime),this._customPlaybackCurrentTime=this._contentPlayer.currentTime}}),200))}}class Bi{constructor(e,t){Oi.initInstanceVariables.call(this),"string"==typeof e&&""!==e&&(this.id=e,this.container=document.getElementById(this.id),this.contentWrapper=this.container.querySelector(".rmp-content"),this.__contentPlayer=this.container.querySelector(".rmp-video"),null!==this.container&&null!==this.contentWrapper&&null!==this.__contentPlayer&&(this.rmpVastContentPlayer=new Mi(this),Ni.logVideoEvents(this.__contentPlayer,"content"),Oi.resetVariablesForNewLoadAds.call(this),Oi.handleFullscreen.call(this),Oi.filterParams.call(this,t)))}dispatch(e,t){const n=this.events[e];if(n){const r={type:e};t&&(r.data=t),n.fire(r)}}_on(e,t){let n=this.events[e];n||(n=new Di(e),this.events[e]=n),n.registerCallback(t)}on(e,t){if("string"!=typeof e||""===e||"function"!=typeof t)return;e.split(" ").forEach((e=>{this._on(e,t)}))}_one(e,t){const n=r=>{this.off(e,n),t(r)};this.on(e,n)}one(e,t){if("string"!=typeof e||""===e||"function"!=typeof t)return;e.split(" ").forEach((e=>{this._one(e,t)}))}_off(e,t){const n=this.events[e];n&&n.callbacks.indexOf(t)>-1&&(n.unregisterCallback(t),0===n.callbacks.length&&delete this.events[e])}off(e,t){if("string"!=typeof e||""===e||"function"!=typeof t)return;e.split(" ").forEach((e=>{this._off(e,t)}))}_addTrackingEvents(e){Object.keys(e).forEach((t=>{e[t].forEach((e=>{this.trackingTags.push({event:t,url:e})}))}))}_handleIntersect(e){e.forEach((e=>{e.intersectionRatio>this.viewablePreviousRatio&&(this.viewableObserver.unobserve(this.container),Oi.createApiEvent.call(this,"adviewable"),Li.dispatch.call(this,"viewable")),this.viewablePreviousRatio=e.intersectionRatio}))}_attachViewableObserver(){if(this.off("adstarted",this.attachViewableObserverFn),void 0!==window.IntersectionObserver){const e={root:null,rootMargin:"0px",threshold:[.5]};this.viewableObserver=new IntersectionObserver(this._handleIntersect.bind(this),e),this.viewableObserver.observe(this.container)}else Oi.createApiEvent.call(this,"adviewundetermined"),Li.dispatch.call(this,"viewundetermined")}_initViewableImpression(){this.viewableObserver&&this.viewableObserver.unobserve(this.container),this.ad.viewableImpression.forEach((e=>{e.viewable.length>0&&e.viewable.forEach((e=>{this.trackingTags.push({event:"viewable",url:e})})),e.notViewable.length>0&&e.notViewable.forEach((e=>{this.trackingTags.push({event:"notviewable",url:e})})),e.viewUndetermined.length>0&&e.viewUndetermined.forEach((e=>{this.trackingTags.push({event:"viewundetermined",url:e})}))})),this.attachViewableObserverFn=this._attachViewableObserver.bind(this),this.on("adstarted",this.attachViewableObserverFn)}_loopAds(e){return u(this,null,(function*(){for(let t=0;t<e.length;t++)yield new Promise((n=>{const r=e[t];if(this.ad.id=r.id,this.ad.adServingId=r.adServingId,this.ad.adType=r.adType,this.ad.title=r.title,this.ad.description=r.description,this.ad.system=r.system,this.ad.advertiser=r.advertiser,this.ad.sequence=r.sequence,e.find((e=>{if(this.adPod=!1,e.sequence&&e.sequence>1)return this.adPod=!0,!0})),this.adPod){let t=e.reduce(((e,t)=>e.sequence>t.sequence?e:t)).sequence;if(e.forEach((e=>{null===e.sequence&&(e.sequence=t+1,t++)})),this.adSequence++,0===this.adPodLength){let t=0;e.forEach((e=>{e.sequence&&t++})),this.adPodLength=t}this.one("addestroyed",(()=>{this.adSequence===this.adPodLength&&(this.adPodLength=0,this.adSequence=0,this.adPod=!1,Oi.createApiEvent.call(this,"adpodcompleted")),n()}))}this.ad.viewableImpression=r.viewableImpression,this.ad.viewableImpression.length>0&&this._initViewableImpression(),r.errorURLTemplates.forEach((e=>{this.adErrorTags.push({event:"error",url:e})})),r.impressionURLTemplates.forEach((e=>{e.url&&this.trackingTags.push({event:"impression",url:e.url})}));const i=r.creatives;for(let e=0;e<i.length;e++){const t=i[e];if("companion"!==t.type){if(this.creative.id=t.id,this.creative.universalAdIds=t.universalAdIds,this.creative.adId=t.adId,this.creative.trackingEvents=t.trackingEvents,"linear"!==t.type)throw new Error("rmp-vast supports only linear creatives");this.creative.duration=t.duration,this.creative.skipDelay=t.skipDelay,this.creative.skipDelay&&(this.creative.skipoffset=t.skipDelay,this.creative.isSkippableAd=!0),t.videoClickThroughURLTemplate&&t.videoClickThroughURLTemplate.url&&(this.creative.clickThroughUrl=t.videoClickThroughURLTemplate.url),t.videoClickTrackingURLTemplates.length>0&&t.videoClickTrackingURLTemplates.forEach((e=>{e.url&&this.trackingTags.push({event:"clickthrough",url:e.url})})),this.creative.isLinear=!0,this._addTrackingEvents(t.trackingEvents),this.rmpVastLinearCreative=new xi(this),this.rmpVastLinearCreative.parse(t)}}}))}))}_handleParsedVast(e){e.errorURLTemplates.length>0&&e.errorURLTemplates.forEach((e=>{this.vastErrorTags.push({event:"error",url:e})})),0!==e.ads.length?this._loopAds(e.ads):Oi.processVastErrors.call(this,303,!0)}_getVastTag(e){if("string"==typeof e&&""!==e)if("undefined"!=typeof DOMParser)if(Oi.createApiEvent.call(this,"adtagstartloading"),this.params.vastXmlInput){let n;try{n=(new DOMParser).parseFromString(e,"text/xml")}catch(t){return console.warn(t),void Oi.processVastErrors.call(this,900,!0)}(new Pi).parseVAST(n).then((e=>{Oi.createApiEvent.call(this,"adtagloaded"),this._handleParsedVast(e)})).catch((e=>{console.warn(e),Oi.processVastErrors.call(this,900,!0)}))}else{const t=new Vi,n={timeout:this.params.ajaxTimeout,withCredentials:this.params.ajaxWithCredentials,wrapperLimit:this.params.maxNumRedirects,resolveAll:!1,allowMultipleAds:!0};this.__adTagUrl=e,t.get(this.__adTagUrl,n).then((e=>{Oi.createApiEvent.call(this,"adtagloaded"),this._handleParsedVast(e)})).catch((e=>{console.warn(e),Oi.processVastErrors.call(this,900,!0)}))}else Oi.processVastErrors.call(this,1002,!1);else Oi.processVastErrors.call(this,1001,!1)}loadAds(e,t){if(this.__initialized||this.initialize(),"object"==typeof t){const e=/coppa|gdpr/gi;t.regulations&&e.test(t.regulations)&&(this.regulationsInfo.regulations=t.regulations);const n=/0|1/gi;t.limitAdTracking&&n.test(t.limitAdTracking)&&(this.regulationsInfo.limitAdTracking=t.limitAdTracking),t.gdprConsent&&(this.regulationsInfo.gdprConsent=t.gdprConsent)}let n=e;if(this.params.vastXmlInput||(n=Li.replaceMacros.call(this,e,!1)),this.__adOnStage)return this.one("addestroyed",this.loadAds.bind(this,n)),void this.stopAds();this._getVastTag(n)}play(){this.__adOnStage&&this.creative&&this.creative.isLinear?this.rmpVastVpaidPlayer?this.rmpVastVpaidPlayer.resumeAd():this.rmpVastAdPlayer&&this.rmpVastAdPlayer.play():this.rmpVastContentPlayer.play()}pause(){this.__adOnStage&&this.creative&&this.creative.isLinear?this.rmpVastVpaidPlayer?this.rmpVastVpaidPlayer.pauseAd():this.rmpVastAdPlayer&&this.rmpVastAdPlayer.pause():this.rmpVastContentPlayer.pause()}stopAds(){this.__adOnStage&&(this.rmpVastVpaidPlayer?this.rmpVastVpaidPlayer.stopAd():this.rmpVastAdPlayer&&this.rmpVastAdPlayer.resumeContent())}destroy(){this.__contentPlayer?(this.__contentPlayer.removeEventListener("webkitbeginfullscreen",this.onFullscreenchangeFn),this.__contentPlayer.removeEventListener("webkitendfullscreen",this.onFullscreenchangeFn)):document.removeEventListener("fullscreenchange",this.onFullscreenchangeFn),this.rmpVastAdPlayer&&this.rmpVastAdPlayer.destroy(),Oi.initInstanceVariables.call(this)}skipAd(){this.__adOnStage&&this.adSkippableState&&(this.rmpVastVpaidPlayer?this.rmpVastVpaidPlayer.skipAd():this.rmpVastAdPlayer&&this.rmpVastAdPlayer.resumeContent())}get environment(){return Ui}get adPaused(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdPaused();if(this.__adPlayer)return this.__adPlayer.paused}return!1}set volume(e){if(!Ni.isNumber(e))return;let t=0;t=e<0?0:e>1?1:e,this.__adOnStage&&this.creative&&this.creative.isLinear&&(this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.setAdVolume(t),this.rmpVastAdPlayer&&(this.rmpVastAdPlayer.volume=t)),this.rmpVastContentPlayer.volume=t}get volume(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdVolume();if(this.rmpVastAdPlayer)return this.rmpVastAdPlayer.volume}return this.rmpVastContentPlayer.volume}set muted(e){"boolean"==typeof e&&(this.__adOnStage&&this.creative&&this.creative.isLinear&&(this.rmpVastVpaidPlayer?e?this.rmpVastVpaidPlayer.setAdVolume(0):this.rmpVastVpaidPlayer.setAdVolume(1):this.rmpVastAdPlayer&&(this.rmpVastAdPlayer.muted=e)),this.rmpVastContentPlayer.muted=e)}get muted(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer)return 0===this.rmpVastVpaidPlayer.getAdVolume();if(this.rmpVastAdPlayer)return this.rmpVastAdPlayer.muted}return this.rmpVastContentPlayer.muted}get adTagUrl(){return this.__adTagUrl}get adMediaUrl(){if(this.__adOnStage){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getCreativeUrl();if(this.creative&&this.creative.mediaUrl)return this.creative.mediaUrl}return""}get adLinear(){return!(!this.creative||!this.creative.isLinear)}get adSystem(){return this.ad&&this.ad.system?{value:this.ad.system.value||"",version:this.ad.system.version||""}:{value:"",version:""}}get adUniversalAdIds(){return this.creative&&this.creative.universalAdIds?this.creative.universalAdIds:[]}get adContentType(){return this.creative&&this.creative.type?this.creative.type:""}get adTitle(){return this.ad&&this.ad.title?this.ad.title:""}get adDescription(){return this.ad&&this.ad.description?this.ad.description:""}get adAdvertiser(){return this.ad&&this.ad.advertiser&&null!==this.ad.advertiser?this.ad.advertiser:{id:"",value:""}}get adAdServingId(){return this.ad&&this.ad.adServingId?this.ad.adServingId:""}get adDuration(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer){let e=this.rmpVastVpaidPlayer.getAdDuration();return e>0&&(e*=1e3),e}if(this.rmpVastAdPlayer)return this.rmpVastAdPlayer.duration}return-1}get adCurrentTime(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer){const e=this.rmpVastVpaidPlayer.getAdRemainingTime(),t=this.rmpVastVpaidPlayer.getAdDuration();return-1===e||-1===t||e>t?-1:1e3*(t-e)}if(this.rmpVastAdPlayer)return this.rmpVastAdPlayer.currentTime}return-1}get adRemainingTime(){if(this.__adOnStage&&this.creative&&this.creative.isLinear){if(this.rmpVastVpaidPlayer){let e=this.rmpVastVpaidPlayer.getAdRemainingTime();return e>0&&(e*=1e3),e}if(this.rmpVastAdPlayer){const e=this.rmpVastAdPlayer.currentTime,t=this.rmpVastAdPlayer.duration;return-1===e||-1===t||e>t?-1:t-e}}return-1}get adOnStage(){return this.__adOnStage}get adMediaWidth(){if(this.__adOnStage){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdWidth();if(this.creative&&this.creative.width)return this.creative.width}return-1}get adMediaHeight(){if(this.__adOnStage){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdHeight();if(this.creative&&this.creative.height)return this.creative.height}return-1}get clickThroughUrl(){return this.creative&&this.creative.clickThroughUrl?this.creative.clickThroughUrl:""}get skipTimeOffset(){return this.creative&&this.creative.skipoffset?this.creative.skipoffset:-1}get isSkippableAd(){return!(!this.creative||!this.creative.isSkippableAd)}get contentPlayerCompleted(){return this.__contentPlayerCompleted}set contentPlayerCompleted(e){"boolean"==typeof e&&(this.__contentPlayerCompleted=e)}get adErrorMessage(){return this.__adErrorMessage}get adVastErrorCode(){return this.__vastErrorCode}get adErrorType(){return this.__adErrorType}get adSkippableState(){if(this.__adOnStage){if(this.rmpVastVpaidPlayer)return this.rmpVastVpaidPlayer.getAdSkippableState();if(this.isSkippableAd&&this.rmpVastLinearCreative)return this.rmpVastLinearCreative.skippableAdCanBeSkipped}return!1}get adPlayer(){return this.__adPlayer}get contentPlayer(){return this.__contentPlayer}get initialized(){return this.__initialized}get adPodInfo(){if(this.adPod&&this.adPodLength){const e={};return e.adPodCurrentIndex=this.adSequence,e.adPodLength=this.adPodLength,e}return{adPodCurrentIndex:-1,adPodLength:0}}_onImgClickThrough(e,t,n){n&&(n.stopPropagation(),"touchend"===n.type&&n.preventDefault()),t&&t.forEach((e=>{e.url&&Li.pingURI.call(this,e.url)})),Ni.openWindow(e)}initialize(){this.__initialized||(this.rmpVastAdPlayer=new Fi(this),this.rmpVastAdPlayer.init())}resizeAd(e,t,n){this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.resizeAd(e,t,n)}expandAd(){this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.expandAd()}collapseAd(){this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.collapseAd()}get adExpanded(){return this.rmpVastVpaidPlayer&&this.rmpVastVpaidPlayer.getAdExpanded(),!1}}const Wi="player-container",qi="player-video",$i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=";function Hi({setPlayerContext:e,playerRef:t,vast:n}){const r=cr(),i=Ir(),a=pn(),s=Nt((e=>{const n=t.current;null!==n&&n.adPaused&&n.play(),e.preventDefault(),e.stopPropagation()}),[t]);St((()=>{var s,o,l;null===t.current&&(t.current=new Bi(i,{vastXmlInput:!0,partnerName:"Adsgram",partnerVersion:"0.0.1",pauseOnEnd:!0,timeEvents:{showActionButton:5e3,showPackshot:-500},clickThroughElementId:_r(r)}),t.current.initialize(),t.current.loadAds(n),null==(s=t.current)||s.on("addestroyed",(()=>{mr.clear()})),null==(o=t.current)||o.on("adstarted",(()=>{mr.dispatchEvent("adstarted"),a.emit(st.onStart)})),null==(l=t.current)||l.on("aderror",(()=>{a.emit(at.error)})),e(t.current))}),[a,r,i,t,e,n]),St((()=>{a.on(at.finalDestroy,(()=>{var e;mr.clear(),null==(e=t.current)||e.destroy()}))}),[a,t]);return Zn(Nt((()=>{var e;(null==(e=t.current)?void 0:e.adPaused)&&setTimeout((()=>{var e;return null==(e=t.current)?void 0:e.play()}),500)}),[t]),Nt((()=>{var e;null==(e=t.current)||e.pause()}),[t])),Cn("div",{class:"rmp-container",id:i,onClick:s,"data-testid":Wi,children:Cn("div",{className:"rmp-content",children:Cn("video",{className:"rmp-video",poster:$i,muted:!0,playsinline:!0,"data-testid":qi})})})}const ji={wrapper:"_wrapper_1cu5o_1"};function Yi({vast:e,playerRef:t,actionButtonTitle:n,image:r,hasPackshot:i,duration:a,title:s,description:o}){const[l,c]=It(null);return Cn(hr.Provider,{value:l,children:Cn("div",{class:ji.wrapper,children:[Cn(Dr,{}),Cn(fr,{text:n}),Cn(Hi,{vast:e,playerRef:t,setPlayerContext:c}),i&&Cn(Mr,{image:r,duration:a,title:s,description:o}),Cn(br,{packshotDuration:a})]})})}const Gi={[p]:function({vast:e,packshotImage:t,actionButtonTitle:n,title:r,description:i}){const a=Vt(null),s=fn("FORCED_SUB_FORMAT");return ir(),Cn("div",{className:or,children:Cn(Yi,{vast:e,playerRef:a,image:t,actionButtonTitle:n,hasPackshot:!0,title:r,description:i,duration:s?15e3:5e3})})},[_]:function({image:e,title:t,description:n,advertiserName:r,buttonName:i,url:a,icon:s}){const o=pn(),l=vn(),c=rr("click"),d=fn("FORCED_SUB_FORMAT"),h=Rt((()=>new sr({callbacks:{endCallback:()=>{o.emit(st.onReward)},3:()=>f(!0),6:()=>_(!0)},endTime:d?dt:ct})),[o,d]),[p,_]=It(!1),[m,f]=It(!1),[g,v]=It(!0),y=Vt(1/0),b=Nt((e=>{m&&(e.isTrusted?(e.preventDefault(),e.stopPropagation(),Qn(c,l),h.stop(),v(!1),y.current=Date.now(),Ln({url:a,logger:l})):o.emit(st.onError))}),[m,c,l,h,a,o]),A=Nt((()=>{Date.now()-y.current>1e4&&o.emit("onReward"),y.current=1/0,h.resume(),v(!0)}),[o,h]);Zn(A,Nt((()=>{h.stop(),v(!1)}),[h]));const E=Vt(null);return function({sendTackingTime:e,element:t,externalIsVisible:n,preventSend:r}){const i=vn(),a=rr("show"),[s,o]=It(!1),l=Rt((()=>new sr({endTime:e,callbacks:{}})),[e]),c=tr(t),d=Rt((()=>null!==t.current&&c&&n&&er(t.current)),[t,n,c]),h=Nt((()=>u(this,null,(function*(){s||r||(yield Qn(a,i),o(!0))}))),[s,i,r,a]),p=Nt((()=>{d||l.stop()}),[d,l]);St((()=>(l.subscribeOnTickUpdate(p),l.subscribeOnEnd(h),()=>{l.unsubscribeAll()})),[h,p,l]),St((()=>{l.isStopped&&d&&l.restart()}),[d,l])}({sendTackingTime:2,element:E,externalIsVisible:g,preventSend:!1}),function({element:e}){const t=vn(),n=rr("render"),[r,i]=It(!1),a=tr(e);St((()=>{a&&n&&!r&&(Qn(n,t),i(!0))}),[n,r,a,t])}({element:E}),ir(),St((()=>{const e=()=>{h.destroy()};return o.on(at.finalDestroy,e),()=>{o.off(at.finalDestroy,e)}}),[o,h]),St((()=>{o.emit(st.onStart)}),[o]),Cn("div",{className:ut,ref:E,onClick:A,children:[Cn(In,{}),Cn("div",{className:ht,children:[Cn(jn,{advertiserName:r,title:t,description:n,image:e,icon:s,onClick:b,isClickable:m}),m&&Cn(Gn,{buttonName:i,onClick:b}),p&&Cn(Xn,{}),Cn(Bn,{timer:h})]})]})}};function zi(e){const{blockId:t,EventEmitter:n,logger:r,isDark:i,children:a,exp:s,trackings:o}=e;return Cn(gn.Provider,{value:r,children:Cn(_t.Provider,{value:n,children:Cn(lr.Provider,{value:t,children:Cn(wn.Provider,{value:i,children:Cn(mn.Provider,{value:s,children:Cn(nr.Provider,{value:o,children:a})})})})})})}function Ki(e){const t={};for(const n in e){const{name:r,value:i}=e[n];t[r]=i}return t}const Xi={[p]:function({banner:e}){const{bannerAssets:t}=e,{title:n,description:r,buttonName:i,buttonImg:a,vast:s}=Ki(t);return{vast:s,packshotImage:a,actionButtonTitle:i,title:n,description:r}},[_]:function({banner:e}){const{bannerAssets:t}=e,{advertiserName:n,buttonName:r,title:i,description:a,icon:s,image:o,url:l}=Ki(t);return{advertiserName:n,buttonName:r,description:a,icon:s,image:o,url:l,title:i}}};class Zi extends Fe{constructor(){super(),this.state={hasError:!1}}componentDidCatch(e,t){try{this.props.logger.add("componentStack",null==t?void 0:t.componentStack).addError(e).send("ErrorBoundary")}catch(n){}this.setState({hasError:!0})}render({EventEmitter:e}){return this.state.hasError?(e.emit(at.renderError),null):this.props.children}}function Ji({data:e,bannerType:t,blockId:n,EventEmitter:r,logger:i,isDark:a}){var s,o;const c=Gi[t],d=Xi[t](e);var u;return Cn(zi,{blockId:n,EventEmitter:r,logger:i,isDark:a,exp:(u=null==(s=null==e?void 0:e.banner)?void 0:s.flags,Object.assign({},_n,function(e){return e&&e.length?e.reduce(((e,t)=>(e[t]=!0,e)),{}):{}}(u))),trackings:function(e){if(!e)return;const t={};for(const n in e){const{name:r,value:i}=e[n];t[r]=i}return t}(null==(o=null==e?void 0:e.banner)?void 0:o.trackings),children:Cn(Zi,{EventEmitter:r,blockId:n,campaignId:e.campaignId,logger:i,children:Cn(c,l({},d))})})}function Qi(e){if(!(e instanceof HTMLElement))throw new pe({message:`${e} cannot be used to display ads`});return!1}function ea(){const{themeParams:e}=G();return e}function ta(){const{bgColor:e}=ea();return!!e&&function(e){const t=D(e);return Math.sqrt([.299,.587,.114].reduce(((e,n,r)=>{const i=parseInt(t.slice(1+2*r,1+2*(r+1)),16);return e+i*i*n}),0))<120}(e)}function na(e=document.documentElement){Object.entries(ea()).forEach((([t,n])=>{var r,i;n&&(r=`--adsgram-${t.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}`,i=n,(e||document.documentElement).style.setProperty(r,i))}))}function ra({blockId:e,container:t,data:n,EventEmitter:r}){const i=t&&Qi(t)?t:function(e){const t=document.createElement("div");return t.setAttribute("id",e),t.setAttribute("style","position: relative;z-index:2147483647;"),document.body.appendChild(t),t}(e);na(i),lt({data:n,EventEmitter:r});const a=ye();a.add("blockId",e).add("bannerType",n.bannerType).add("campaignId",n.campaignId);try{nt(Cn(Ji,{bannerType:n.bannerType,data:n,blockId:e,EventEmitter:r,logger:a,isDark:ta()}),i)}catch(s){a.send("RenderError"),r.emit(at.renderError)}}class ia{constructor({blockId:e,container:t,debug:n,debugBannerType:r}){d(this,"blockId"),d(this,"EventEmitter"),d(this,"bannerData"),d(this,"forceCampaignId"),d(this,"loadBannerPromise"),d(this,"container"),d(this,"shouldRemoveContainer"),d(this,"isShowing"),d(this,"isLoading"),this.blockId=e,this.container=t,this.shouldRemoveContainer=!(t&&Qi(t)),this.EventEmitter=new pt,this.subscribe(),this.isShowing=!1,this.isLoading=!1,this.forceCampaignId=n?Z[r||J]:void 0}show(){return u(this,null,(function*(){if(!this.bannerData){if(!(yield this._load()))return new Promise(((e,t)=>t(te.noBannerToShowError)))}return this.isShowing?new Promise(((e,t)=>{t(te.duplicateShowError)})):new Promise(((e,t)=>{if(!this.bannerData)return t(te.noBannerDataError);this.isShowing=!0,this.EventEmitter.emit(at.show);try{ra({blockId:this.blockId,container:this.container,data:this.bannerData,EventEmitter:this.EventEmitter})}catch(n){ye().add("blockId",this.blockId).add("bannerType",this.bannerData.bannerType).add("campaignId",this.bannerData.campaignId).send("UnknownRenderError","WARN"),t(te.renderError)}this.EventEmitter.on(at.renderError,(()=>{this.EventEmitter.emit(st.onError),t(te.renderError)})),this.EventEmitter.on(at.error,(()=>{this.EventEmitter.emit(st.onError),t(te.playError)})),this.EventEmitter.on(st.onSkip,(()=>{t(te.skip)})),this.EventEmitter.on(st.onReward,(()=>{e(te.reward)}))}))}))}load(){return u(this,null,(function*(){return new Promise((e=>{e(!0)}))}))}preload(){return u(this,null,(function*(){this.EventEmitter.emit(at.preload)}))}addEventListener(e,t){if(!st[e])throw new pe({message:`The event argument must be one of ${Object.keys(st).join(", ")}. Received ${e}`});this.EventEmitter.on(e,t)}removeEventListener(e,t){if(!st[e])throw new pe({message:`The event argument must be one of ${Object.keys(st).join(", ")}. Received ${e}`});this.EventEmitter.off(e,t)}destroy(){this.EventEmitter.emit(at.destroy)}_load(){return u(this,null,(function*(){return this.bannerData?new Promise((e=>e(!0))):this.loadBannerPromise instanceof Promise&&this.isLoading?yield this.loadBannerPromise:(this.isLoading=!0,this.EventEmitter.emit(at.load),this.loadBannerPromise=be(this.blockId,this.forceCampaignId).then((e=>e&&e.bannerType?(this.bannerData=e,!0):(this.EventEmitter.hasHandlers(st.onBannerNotFound)?this.EventEmitter.emit(st.onBannerNotFound):he({message:X(h)}),!1))).catch((()=>(this.EventEmitter.emit(st.onError),!1))).finally((()=>{this.isLoading=!1})),this.loadBannerPromise)}))}finalDestroy(){this.EventEmitter.emit(at.finalDestroy),function({blockId:e,container:t,shouldRemoveContainer:n}){const r=t||document.getElementById(e);r&&(nt(null,r),n&&r.remove())}({blockId:this.blockId,container:this.container,shouldRemoveContainer:this.shouldRemoveContainer}),this.resetVariables()}subscribe(){this.EventEmitter.on(at.destroy,this.finalDestroy.bind(this)),this.EventEmitter.on(st.onReward,this.finalDestroy.bind(this)),this.EventEmitter.on(st.onSkip,this.finalDestroy.bind(this)),this.EventEmitter.on(at.error,this.finalDestroy.bind(this)),this.EventEmitter.on(at.renderError,this.finalDestroy.bind(this))}resetVariables(){this.bannerData=void 0,this.loadBannerPromise=void 0,this.isShowing=!1}}const aa={blockId:function(e){if(!("blockId"in e))throw new pe({message:"blockId is required param for init function"});if("string"!=typeof e.blockId)throw new pe({message:"blockId param should be string"});if(!/\d+/.test(e.blockId))throw new pe({message:`blockId param should be string with number value inside, you pass ${e.blockId}`});return!0},container:function(e){if("container"in e){if(e.container instanceof HTMLElement)return!0;throw new pe({message:`container should be instanceof HTMLElement you call with ${JSON.stringify(e.container)}`})}return!0},hasReward:function(e){if("hasReward"in e){if("boolean"!=typeof e.hasReward)throw new pe({message:`hasReward should be boolean you call with ${JSON.stringify(e.hasReward)}`});return!0}return!0},debug:function(e){if("debug"in e){if("boolean"!=typeof e.debug)throw new pe({message:`debug should be boolean you call with ${JSON.stringify(e.debug)}`});return!0}return!0},debugBannerType:function(e){if("debugBannerType"in e){if("string"!=typeof e.debugBannerType)throw new pe({message:`debugBannerType should be string you call with ${JSON.stringify(e.debugBannerType)}`});if(!Object.keys(Z).includes(e.debugBannerType))throw new pe({message:`debugBannerType should be one of ${Object.keys(Z)} you call with ${e.debugBannerType}`})}return!0}};const sa={};function oa(e){if(!function(e){if("object"!=typeof e)throw new pe({message:`Object should be passed to the init function you pass ${JSON.stringify(e)}`});return!("object"!=typeof e||e instanceof Function||Array.isArray(e)||null===e)&&Object.values(aa).every((t=>t(e)))}(e))throw new pe({message:"Attempt to create AdController with wrong params"});const{blockId:t}=e;return sa[t]||(sa[t]=new ia(e)),sa[t]}function la(e){return oa(e)}window.Adsgram=c(l({},window.Adsgram),{init:la}),e.init=la,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
